var hl=Object.defineProperty;var ko=Object.getOwnPropertySymbols;var pl=Object.prototype.hasOwnProperty,dl=Object.prototype.propertyIsEnumerable;var Ao=(r,e,t)=>e in r?hl(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,we=(r,e)=>{for(var t in e||(e={}))pl.call(e,t)&&Ao(r,t,e[t]);if(ko)for(var t of ko(e))dl.call(e,t)&&Ao(r,t,e[t]);return r};var an=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xo;(function(r){(function(e){var t=typeof an=="object"?an:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(r);typeof t.Reflect=="undefined"?t.Reflect=r:n=i(t.Reflect,n),e(n);function i(o,s){return function(a,c){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:c}),s&&s(a,c)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,c=!s&&!a,u={create:s?function(){return sn(Object.create(null))}:a?function(){return sn({__proto__:null})}:function(){return sn({})},has:c?function(p,b){return t.call(p,b)}:function(p,b){return b in p},get:c?function(p,b){return t.call(p,b)?p[b]:void 0}:function(p,b){return p[b]}},w=Object.getPrototypeOf(Function),m=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",j=!m&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:cl(),S=!m&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ul(),f=!m&&typeof WeakMap=="function"?WeakMap:fl(),d=new f;function g(p,b,B,I){if(Y(B)){if(!mo(p))throw new TypeError;if(!bo(b))throw new TypeError;return Ya(p,b)}else{if(!mo(p))throw new TypeError;if(!te(b))throw new TypeError;if(!te(I)&&!Y(I)&&!dt(I))throw new TypeError;return dt(I)&&(I=void 0),B=He(B),Xa(p,b,B,I)}}e("decorate",g);function v(p,b){function B(I,O){if(!te(I))throw new TypeError;if(!Y(O)&&!il(O))throw new TypeError;po(p,b,I,O)}return B}e("metadata",v);function x(p,b,B,I){if(!te(B))throw new TypeError;return Y(I)||(I=He(I)),po(p,b,B,I)}e("defineMetadata",x);function k(p,b,B){if(!te(b))throw new TypeError;return Y(B)||(B=He(B)),uo(p,b,B)}e("hasMetadata",k);function L(p,b,B){if(!te(b))throw new TypeError;return Y(B)||(B=He(B)),nn(p,b,B)}e("hasOwnMetadata",L);function ie(p,b,B){if(!te(b))throw new TypeError;return Y(B)||(B=He(B)),fo(p,b,B)}e("getMetadata",ie);function ee(p,b,B){if(!te(b))throw new TypeError;return Y(B)||(B=He(B)),ho(p,b,B)}e("getOwnMetadata",ee);function Ge(p,b){if(!te(p))throw new TypeError;return Y(b)||(b=He(b)),yo(p,b)}e("getMetadataKeys",Ge);function Ka(p,b){if(!te(p))throw new TypeError;return Y(b)||(b=He(b)),vo(p,b)}e("getOwnMetadataKeys",Ka);function Za(p,b,B){if(!te(b))throw new TypeError;Y(B)||(B=He(B));var I=Tt(b,B,!1);if(Y(I)||!I.delete(p))return!1;if(I.size>0)return!0;var O=d.get(b);return O.delete(B),O.size>0||d.delete(b),!0}e("deleteMetadata",Za);function Ya(p,b){for(var B=p.length-1;B>=0;--B){var I=p[B],O=I(b);if(!Y(O)&&!dt(O)){if(!bo(O))throw new TypeError;b=O}}return b}function Xa(p,b,B,I){for(var O=p.length-1;O>=0;--O){var ne=p[O],_=ne(b,B,I);if(!Y(_)&&!dt(_)){if(!te(_))throw new TypeError;I=_}}return I}function Tt(p,b,B){var I=d.get(p);if(Y(I)){if(!B)return;I=new j,d.set(p,I)}var O=I.get(b);if(Y(O)){if(!B)return;O=new j,I.set(b,O)}return O}function uo(p,b,B){var I=nn(p,b,B);if(I)return!0;var O=on(b);return dt(O)?!1:uo(p,O,B)}function nn(p,b,B){var I=Tt(b,B,!1);return Y(I)?!1:rl(I.has(p))}function fo(p,b,B){var I=nn(p,b,B);if(I)return ho(p,b,B);var O=on(b);if(!dt(O))return fo(p,O,B)}function ho(p,b,B){var I=Tt(b,B,!1);if(!Y(I))return I.get(p)}function po(p,b,B,I){var O=Tt(B,I,!0);O.set(p,b)}function yo(p,b){var B=vo(p,b),I=on(p);if(I===null)return B;var O=yo(I,b);if(O.length<=0)return B;if(B.length<=0)return O;for(var ne=new S,_=[],D=0,P=B;D<P.length;D++){var M=P[D],F=ne.has(M);F||(ne.add(M),_.push(M))}for(var We=0,Bo=O;We<Bo.length;We++){var M=Bo[We],F=ne.has(M);F||(ne.add(M),_.push(M))}return _}function vo(p,b){var B=[],I=Tt(p,b,!1);if(Y(I))return B;for(var O=I.keys(),ne=ol(O),_=0;;){var D=al(ne);if(!D)return B.length=_,B;var P=sl(D);try{B[_]=P}catch(M){try{ll(ne)}finally{throw M}}_++}}function go(p){if(p===null)return 1;switch(typeof p){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return p===null?1:6;default:return 6}}function Y(p){return p===void 0}function dt(p){return p===null}function Qa(p){return typeof p=="symbol"}function te(p){return typeof p=="object"?p!==null:typeof p=="function"}function el(p,b){switch(go(p)){case 0:return p;case 1:return p;case 2:return p;case 3:return p;case 4:return p;case 5:return p}var B=b===3?"string":b===5?"number":"default",I=wo(p,i);if(I!==void 0){var O=I.call(p,B);if(te(O))throw new TypeError;return O}return tl(p,B==="default"?"number":B)}function tl(p,b){if(b==="string"){var B=p.toString;if(yt(B)){var I=B.call(p);if(!te(I))return I}var O=p.valueOf;if(yt(O)){var I=O.call(p);if(!te(I))return I}}else{var O=p.valueOf;if(yt(O)){var I=O.call(p);if(!te(I))return I}var ne=p.toString;if(yt(ne)){var I=ne.call(p);if(!te(I))return I}}throw new TypeError}function rl(p){return!!p}function nl(p){return""+p}function He(p){var b=el(p,3);return Qa(b)?b:nl(b)}function mo(p){return Array.isArray?Array.isArray(p):p instanceof Object?p instanceof Array:Object.prototype.toString.call(p)==="[object Array]"}function yt(p){return typeof p=="function"}function bo(p){return typeof p=="function"}function il(p){switch(go(p)){case 3:return!0;case 4:return!0;default:return!1}}function wo(p,b){var B=p[b];if(B!=null){if(!yt(B))throw new TypeError;return B}}function ol(p){var b=wo(p,o);if(!yt(b))throw new TypeError;var B=b.call(p);if(!te(B))throw new TypeError;return B}function sl(p){return p.value}function al(p){var b=p.next();return b.done?!1:b}function ll(p){var b=p.return;b&&b.call(p)}function on(p){var b=Object.getPrototypeOf(p);if(typeof p!="function"||p===w||b!==w)return b;var B=p.prototype,I=B&&Object.getPrototypeOf(B);if(I==null||I===Object.prototype)return b;var O=I.constructor;return typeof O!="function"||O===p?b:O}function cl(){var p={},b=[],B=function(){function _(D,P,M){this._index=0,this._keys=D,this._values=P,this._selector=M}return _.prototype["@@iterator"]=function(){return this},_.prototype[o]=function(){return this},_.prototype.next=function(){var D=this._index;if(D>=0&&D<this._keys.length){var P=this._selector(this._keys[D],this._values[D]);return D+1>=this._keys.length?(this._index=-1,this._keys=b,this._values=b):this._index++,{value:P,done:!1}}return{value:void 0,done:!0}},_.prototype.throw=function(D){throw this._index>=0&&(this._index=-1,this._keys=b,this._values=b),D},_.prototype.return=function(D){return this._index>=0&&(this._index=-1,this._keys=b,this._values=b),{value:D,done:!0}},_}();return function(){function _(){this._keys=[],this._values=[],this._cacheKey=p,this._cacheIndex=-2}return Object.defineProperty(_.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),_.prototype.has=function(D){return this._find(D,!1)>=0},_.prototype.get=function(D){var P=this._find(D,!1);return P>=0?this._values[P]:void 0},_.prototype.set=function(D,P){var M=this._find(D,!0);return this._values[M]=P,this},_.prototype.delete=function(D){var P=this._find(D,!1);if(P>=0){for(var M=this._keys.length,F=P+1;F<M;F++)this._keys[F-1]=this._keys[F],this._values[F-1]=this._values[F];return this._keys.length--,this._values.length--,D===this._cacheKey&&(this._cacheKey=p,this._cacheIndex=-2),!0}return!1},_.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=p,this._cacheIndex=-2},_.prototype.keys=function(){return new B(this._keys,this._values,I)},_.prototype.values=function(){return new B(this._keys,this._values,O)},_.prototype.entries=function(){return new B(this._keys,this._values,ne)},_.prototype["@@iterator"]=function(){return this.entries()},_.prototype[o]=function(){return this.entries()},_.prototype._find=function(D,P){return this._cacheKey!==D&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=D)),this._cacheIndex<0&&P&&(this._cacheIndex=this._keys.length,this._keys.push(D),this._values.push(void 0)),this._cacheIndex},_}();function I(_,D){return _}function O(_,D){return D}function ne(_,D){return[_,D]}}function ul(){return function(){function p(){this._map=new j}return Object.defineProperty(p.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),p.prototype.has=function(b){return this._map.has(b)},p.prototype.add=function(b){return this._map.set(b,b),this},p.prototype.delete=function(b){return this._map.delete(b)},p.prototype.clear=function(){this._map.clear()},p.prototype.keys=function(){return this._map.keys()},p.prototype.values=function(){return this._map.values()},p.prototype.entries=function(){return this._map.entries()},p.prototype["@@iterator"]=function(){return this.keys()},p.prototype[o]=function(){return this.keys()},p}()}function fl(){var p=16,b=u.create(),B=I();return function(){function P(){this._key=I()}return P.prototype.has=function(M){var F=O(M,!1);return F!==void 0?u.has(F,this._key):!1},P.prototype.get=function(M){var F=O(M,!1);return F!==void 0?u.get(F,this._key):void 0},P.prototype.set=function(M,F){var We=O(M,!0);return We[this._key]=F,this},P.prototype.delete=function(M){var F=O(M,!1);return F!==void 0?delete F[this._key]:!1},P.prototype.clear=function(){this._key=I()},P}();function I(){var P;do P="@@WeakMap@@"+D();while(u.has(b,P));return b[P]=!0,P}function O(P,M){if(!t.call(P,B)){if(!M)return;Object.defineProperty(P,B,{value:u.create()})}return P[B]}function ne(P,M){for(var F=0;F<M;++F)P[F]=Math.random()*255|0;return P}function _(P){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(P)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(P)):ne(new Uint8Array(P),P):ne(new Array(P),P)}function D(){var P=_(p);P[6]=P[6]&79|64,P[8]=P[8]&191|128;for(var M="",F=0;F<p;++F){var We=P[F];(F===4||F===6||F===8)&&(M+="-"),We<16&&(M+="0"),M+=We.toString(16).toLowerCase()}return M}}function sn(p){return p.__=void 0,delete p.__,p}})})(xo||(xo={}));function V(r,e,t){return r instanceof Object&&e in r?r[e]:t}function Be(r,e=0,t=r.byteLength-e,n=!1){let i="";for(const o of new Uint8Array(r,e,t)){const s=o.toString(16).toUpperCase();s.length===1&&(i+="0"),i+=s,n&&(i+=" ")}return i.trim()}function Ne(r,e,t,n){return e instanceof ArrayBuffer?e.byteLength===0?(r.error="Wrong parameter: inputBuffer has zero length",!1):t<0?(r.error="Wrong parameter: inputOffset less than zero",!1):n<0?(r.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-n<0?(r.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(r.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)}function vt(r,e){let t=0;if(r.length===1)return r[0];for(let n=r.length-1;n>=0;n--)t+=r[r.length-1-n]*Math.pow(2,e*n);return t}function Je(r,e,t=-1){const n=t;let i=r,o=0,s=Math.pow(2,e);for(let a=1;a<8;a++){if(r<s){let c;if(n<0)c=new ArrayBuffer(a),o=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),o=n}const u=new Uint8Array(c);for(let w=a-1;w>=0;w--){const m=Math.pow(2,w*e);u[o-w-1]=Math.floor(i/m),i-=u[o-w-1]*m}return c}s*=Math.pow(2,e)}return new ArrayBuffer(0)}function gt(...r){let e=0,t=0;for(const o of r)e+=o.byteLength;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const o of r)i.set(new Uint8Array(o),t),t+=o.byteLength;return n}function ln(...r){let e=0,t=0;for(const o of r)e+=o.length;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const o of r)i.set(o,t),t+=o.length;return i}function So(){const r=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=r[0]===255&&r[1]&128,c=r[0]===0&&(r[1]&128)==0;(a||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)t[a]=0;t[0]=r[0]&128;const n=vt(t,8),i=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)o[a]=r[a];return o[0]&=127,vt(o,8)-n}function yl(r){const e=r<0?r*-1:r;let t=128;for(let n=1;n<8;n++){if(e<=t){if(r<0){const s=t-e,a=Je(s,8,n),c=new Uint8Array(a);return c[0]|=128,a}let i=Je(e,8,n),o=new Uint8Array(i);if(o[0]&128){const s=i.slice(0),a=new Uint8Array(s);i=new ArrayBuffer(i.byteLength+1),o=new Uint8Array(i);for(let c=0;c<s.byteLength;c++)o[c+1]=a[c];o[0]=0}return i}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function Co(r,e){if(r.byteLength!==e.byteLength)return!1;const t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0}function fe(r,e){const t=r.toString(10);if(e<t.length)return"";const n=e-t.length,i=new Array(n);for(let s=0;s<n;s++)i[s]="0";return i.join("").concat(t)}const Ht=[new Uint8Array([1])],Io="0123456789";class de{constructor(e={}){this.blockLength=V(e,"blockLength",0),this.error=V(e,"error",""),this.warnings=V(e,"warnings",[]),"valueBeforeDecode"in e?this.valueBeforeDecode=e.valueBeforeDecode.slice(0):this.valueBeforeDecode=new ArrayBuffer(0)}static blockName(){return"baseBlock"}toJSON(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Be(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}const ke=r=>class extends r{constructor(t={}){super(t);this.isHexOnly=V(t,"isHexOnly",!1),"valueHex"in t?this.valueHex=t.valueHex.slice(0):this.valueHex=new ArrayBuffer(0)}static blockName(){return"hexBlock"}fromBER(t,n,i){return Ne(this,t,n,i)===!1?-1:new Uint8Array(t,n,i).length===0?(this.warnings.push("Zero buffer length"),n):(this.valueHex=t.slice(n,n+i),this.blockLength=i,n+i)}toBER(t=!1){return this.isHexOnly!==!0?(this.error='Flag "isHexOnly" is not set, abort',new ArrayBuffer(0)):t===!0?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}toJSON(){let t={};try{t=super.toJSON()}catch{}return t.blockName=this.constructor.blockName(),t.isHexOnly=this.isHexOnly,t.valueHex=Be(this.valueHex,0,this.valueHex.byteLength),t}};class vl extends ke(de){constructor(e={}){super();"idBlock"in e?(this.isHexOnly=V(e.idBlock,"isHexOnly",!1),this.valueHex=V(e.idBlock,"valueHex",new ArrayBuffer(0)),this.tagClass=V(e.idBlock,"tagClass",-1),this.tagNumber=V(e.idBlock,"tagNumber",-1),this.isConstructed=V(e.idBlock,"isConstructed",!1)):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}static blockName(){return"identificationBlock"}toBER(e=!1){let t=0,n,i;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){if(n=new ArrayBuffer(1),i=new Uint8Array(n),!e){let o=this.tagNumber;o&=31,t|=o,i[0]=t}return n}if(this.isHexOnly===!1){const o=Je(this.tagNumber,7),s=new Uint8Array(o),a=o.byteLength;if(n=new ArrayBuffer(a+1),i=new Uint8Array(n),i[0]=t|31,!e){for(let c=0;c<a-1;c++)i[c+1]=s[c]|128;i[a]=s[a-1]}return n}if(n=new ArrayBuffer(this.valueHex.byteLength+1),i=new Uint8Array(n),i[0]=t|31,e===!1){const o=new Uint8Array(this.valueHex);for(let s=0;s<o.length-1;s++)i[s+1]=o[s]|128;i[this.valueHex.byteLength]=o[o.length-1]}return n}fromBER(e,t,n){if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)==32,this.isHexOnly=!1;const s=i[0]&31;if(s!==31)this.tagNumber=s,this.blockLength=1;else{let a=1;this.valueHex=new ArrayBuffer(255);let c=255,u=new Uint8Array(this.valueHex);for(;i[a]&128;){if(u[a-1]=i[a]&127,a++,a>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(a===c){c+=255;const j=new ArrayBuffer(c),S=new Uint8Array(j);for(let f=0;f<u.length;f++)S[f]=u[f];this.valueHex=new ArrayBuffer(c),u=new Uint8Array(this.valueHex)}}this.blockLength=a+1,u[a-1]=i[a]&127;const w=new ArrayBuffer(a),m=new Uint8Array(w);for(let j=0;j<a;j++)m[j]=u[j];this.valueHex=new ArrayBuffer(a),u=new Uint8Array(this.valueHex),u.set(m),this.blockLength<=9?this.tagNumber=vt(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.blockName=this.constructor.blockName(),e.tagClass=this.tagClass,e.tagNumber=this.tagNumber,e.isConstructed=this.isConstructed,e}}class gl extends de{constructor(e={}){super();"lenBlock"in e?(this.isIndefiniteForm=V(e.lenBlock,"isIndefiniteForm",!1),this.longFormUsed=V(e.lenBlock,"longFormUsed",!1),this.length=V(e.lenBlock,"length",0)):(this.isIndefiniteForm=!1,this.longFormUsed=!1,this.length=0)}static blockName(){return"lengthBlock"}fromBER(e,t,n){if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm===!0)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,t+this.blockLength;const o=i[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=i[a+1];return s[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=vt(s,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed===!0){const i=Je(this.length,8);if(i.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength+1),e===!0)return t;const o=new Uint8Array(i);n=new Uint8Array(t),n[0]=i.byteLength|128;for(let s=0;s<i.byteLength;s++)n[s+1]=o[s];return t}return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.blockName=this.constructor.blockName(),e.isIndefiniteForm=this.isIndefiniteForm,e.longFormUsed=this.longFormUsed,e.length=this.length,e}}class Ue extends de{constructor(e={}){super(e)}static blockName(){return"valueBlock"}fromBER(e,t,n){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}toBER(e=!1){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}class X extends de{constructor(e={},t=Ue){super(e);"name"in e&&(this.name=e.name),"optional"in e&&(this.optional=e.optional),"primitiveSchema"in e&&(this.primitiveSchema=e.primitiveSchema),this.idBlock=new vl(e),this.lenBlock=new gl(e),this.valueBlock=new t(e)}static blockName(){return"BaseBlock"}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e=!1){let t;const n=this.idBlock.toBER(e),i=this.valueBlock.toBER(!0);this.lenBlock.length=i.byteLength;const o=this.lenBlock.toBER(e);t=gt(n,o);let s;if(e===!1?s=this.valueBlock.toBER(e):s=new ArrayBuffer(this.lenBlock.length),t=gt(t,s),this.lenBlock.isIndefiniteForm===!0){const a=new ArrayBuffer(2);if(e===!1){const c=new Uint8Array(a);c[0]=0,c[1]=0}t=gt(t,a)}return t}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.idBlock=this.idBlock.toJSON(),e.lenBlock=this.lenBlock.toJSON(),e.valueBlock=this.valueBlock.toJSON(),"name"in this&&(e.name=this.name),"optional"in this&&(e.optional=this.optional),"primitiveSchema"in this&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(){return`${this.constructor.blockName()} : ${Be(this.valueBlock.valueHex)}`}}class ml extends Ue{constructor(e={}){super(e);"valueHex"in e?this.valueHex=e.valueHex.slice(0):this.valueHex=new ArrayBuffer(0),this.isHexOnly=V(e,"isHexOnly",!0)}fromBER(e,t,n){if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);if(i.length===0)return this.warnings.push("Zero buffer length"),t;this.valueHex=new ArrayBuffer(i.length);const o=new Uint8Array(this.valueHex);for(let s=0;s<i.length;s++)o[s]=i[s];return this.blockLength=n,t+n}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"PrimitiveValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.valueHex=Be(this.valueHex,0,this.valueHex.byteLength),e.isHexOnly=this.isHexOnly,e}}class Ut extends X{constructor(e={}){super(e,ml);this.idBlock.isConstructed=!1}static blockName(){return"PRIMITIVE"}}class nt extends Ue{constructor(e={}){super(e);this.value=V(e,"value",[]),this.isIndefiniteForm=V(e,"isIndefiniteForm",!1)}fromBER(e,t,n){const i=t,o=n;if(Ne(this,e,t,n)===!1)return-1;if(new Uint8Array(e,t,n).length===0)return this.warnings.push("Zero buffer length"),t;function a(u,w){return u===!0?1:w}let c=t;for(;a(this.isIndefiniteForm,n)>0;){const u=Uo(e,c,n);if(u.offset===-1)return this.error=u.result.error,this.warnings.concat(u.result.warnings),-1;if(c=u.offset,this.blockLength+=u.result.blockLength,n-=u.result.blockLength,this.value.push(u.result),this.isIndefiniteForm===!0&&u.result.constructor.blockName()===mt.blockName())break}return this.isIndefiniteForm===!0&&(this.value[this.value.length-1].constructor.blockName()===mt.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=e.slice(i,i+o),c}toBER(e=!1){let t=new ArrayBuffer(0);for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);t=gt(t,i)}return t}static blockName(){return"ConstructedValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}e.isIndefiniteForm=this.isIndefiniteForm,e.value=[];for(let t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e}}class le extends X{constructor(e={}){super(e,nt);this.idBlock.isConstructed=!0}static blockName(){return"CONSTRUCTED"}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}toString(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString().split(`
`).map(i=>`  ${i}`).join(`
`));const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.blockName();return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}}class bl extends Ue{constructor(e={}){super(e)}fromBER(e,t,n){return t}toBER(e=!1){return new ArrayBuffer(0)}static blockName(){return"EndOfContentValueBlock"}}class mt extends X{constructor(e={}){super(e,bl);this.idBlock.tagClass=1,this.idBlock.tagNumber=0}static blockName(){return"EndOfContent"}}class wl extends Ue{constructor(e={}){super(e);if(this.value=V(e,"value",!1),this.isHexOnly=V(e,"isHexOnly",!1),"valueHex"in e)this.valueHex=e.valueHex.slice(0);else if(this.valueHex=new ArrayBuffer(1),this.value===!0){const t=new Uint8Array(this.valueHex);t[0]=255}}fromBER(e,t,n){if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(i.length);const o=new Uint8Array(this.valueHex);for(let s=0;s<i.length;s++)o[s]=i[s];return So.call(this)!==0?this.value=!0:this.value=!1,this.blockLength=n,t+n}toBER(e=!1){return this.valueHex}static blockName(){return"BooleanValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.value=this.value,e.isHexOnly=this.isHexOnly,e.valueHex=Be(this.valueHex,0,this.valueHex.byteLength),e}}class cn extends X{constructor(e={}){super(e,wl);this.idBlock.tagClass=1,this.idBlock.tagNumber=1}static blockName(){return"BOOLEAN"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Ke extends le{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=16}static blockName(){return"SEQUENCE"}}class Ze extends le{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=17}static blockName(){return"SET"}}class bt extends X{constructor(e={}){super(e,de);this.idBlock.tagClass=1,this.idBlock.tagNumber=5}static blockName(){return"NULL"}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e=!1){const t=new ArrayBuffer(2);if(e===!0)return t;const n=new Uint8Array(t);return n[0]=5,n[1]=0,t}toString(){return`${this.constructor.blockName()}`}}class Bl extends ke(nt){constructor(e={}){super(e);this.isConstructed=V(e,"isConstructed",!1)}fromBER(e,t,n){let i=0;if(this.isConstructed===!0){if(this.isHexOnly=!1,i=nt.prototype.fromBER.call(this,e,t,n),i===-1)return i;for(let o=0;o<this.value.length;o++){const s=this.value[o].constructor.blockName();if(s===mt.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==Le.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,t,n),this.blockLength=n;return i}toBER(e=!1){if(this.isConstructed===!0)return nt.prototype.toBER.call(this,e);let t=new ArrayBuffer(this.valueHex.byteLength);return e===!0||this.valueHex.byteLength===0||(t=this.valueHex.slice(0)),t}static blockName(){return"OctetStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=Be(this.valueHex,0,this.valueHex.byteLength),e}}class Le extends X{constructor(e={}){super(e,Bl);this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const i=e.slice(t,t+n);try{const o=Oe(i);o.offset!==-1&&o.offset===n&&(this.valueBlock.value=[o.result])}catch{}}return super.fromBER(e,t,n)}static blockName(){return"OCTET STRING"}isEqual(e){return!(!(e instanceof Le)||JSON.stringify(this)!==JSON.stringify(e))}toString(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?le.prototype.toString.call(this):`${this.constructor.blockName()} : ${Be(this.valueBlock.valueHex)}`}}class kl extends ke(nt){constructor(e={}){super(e);this.unusedBits=V(e,"unusedBits",0),this.isConstructed=V(e,"isConstructed",!1),this.blockLength=this.valueHex.byteLength}fromBER(e,t,n){if(n===0)return t;let i=-1;if(this.isConstructed===!0){if(i=nt.prototype.fromBER.call(this,e,t,n),i===-1)return i;for(let a=0;a<this.value.length;a++){const c=this.value[a].constructor.blockName();if(c===mt.blockName()){if(this.isIndefiniteForm===!0)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==_e.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[a].valueBlock.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[a].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return i}if(Ne(this,e,t,n)===!1)return-1;const o=new Uint8Array(e,t,n);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=e.slice(t+1,t+n);try{const c=Oe(a);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}catch{}}this.valueHex=new ArrayBuffer(o.length-1);const s=new Uint8Array(this.valueHex);for(let a=0;a<n-1;a++)s[a]=o[a+1];return this.blockLength=o.length,t+n}toBER(e=!1){if(this.isConstructed===!0)return nt.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.valueHex.byteLength+1);if(this.valueHex.byteLength===0)return new ArrayBuffer(0);const t=new Uint8Array(this.valueHex),n=new ArrayBuffer(this.valueHex.byteLength+1),i=new Uint8Array(n);i[0]=this.unusedBits;for(let o=0;o<this.valueHex.byteLength;o++)i[o+1]=t[o];return n}static blockName(){return"BitStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.unusedBits=this.unusedBits,e.isConstructed=this.isConstructed,e.isHexOnly=this.isHexOnly,e.valueHex=Be(this.valueHex,0,this.valueHex.byteLength),e}}class _e extends X{constructor(e={}){super(e,kl);this.idBlock.tagClass=1,this.idBlock.tagNumber=3}static blockName(){return"BIT STRING"}fromBER(e,t,n){return n===0?t:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n))}isEqual(e){return!(!(e instanceof _e)||JSON.stringify(this)!==JSON.stringify(e))}toString(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return le.prototype.toString.call(this);{const e=[],t=new Uint8Array(this.valueBlock.valueHex);for(const n of t)e.push(n.toString(2).padStart(8,"0"));return`${this.constructor.blockName()} : ${e.join("")}`}}}class Al extends ke(Ue){constructor(e={}){super(e);"value"in e&&(this.valueDec=e.value)}set valueHex(e){this._valueHex=e.slice(0),e.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,e.byteLength>0&&(this._valueDec=So.call(this)))}get valueHex(){return this._valueHex}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this._valueHex=yl(e)}get valueDec(){return this._valueDec}fromDER(e,t,n,i=0){const o=this.fromBER(e,t,n);if(o===-1)return o;const s=new Uint8Array(this._valueHex);if(s[0]===0&&(s[1]&128)!=0){const a=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(a).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=a.slice(0)}else if(i!==0&&this._valueHex.byteLength<i){i-this._valueHex.byteLength>1&&(i=this._valueHex.byteLength+1);const a=new ArrayBuffer(i);new Uint8Array(a).set(s,i-this._valueHex.byteLength),this._valueHex=a.slice(0)}return o}toDER(e=!1){const t=new Uint8Array(this._valueHex);switch(!0){case(t[0]&128)!=0:{const n=new ArrayBuffer(this._valueHex.byteLength+1),i=new Uint8Array(n);i[0]=0,i.set(t,1),this._valueHex=n.slice(0)}break;case(t[0]===0&&(t[1]&128)==0):{const n=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(n).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=n.slice(0)}break}return this.toBER(e)}fromBER(e,t,n){const i=super.fromBER(e,t,n);return i===-1?i:(this.blockLength=n,t+n)}toBER(e=!1){return this.valueHex.slice(0)}static blockName(){return"IntegerValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.valueDec=this.valueDec,e}toString(){function e(m,j){const S=new Uint8Array([0]);let f=new Uint8Array(m),d=new Uint8Array(j),g=f.slice(0);const v=g.length-1;let x=d.slice(0);const k=x.length-1;let L=0;const ie=k<v?v:k;let ee=0;for(let Ge=ie;Ge>=0;Ge--,ee++){switch(!0){case ee<x.length:L=g[v-ee]+x[k-ee]+S[0];break;default:L=g[v-ee]+S[0]}switch(S[0]=L/10,!0){case ee>=g.length:g=ln(new Uint8Array([L%10]),g);break;default:g[v-ee]=L%10}}return S[0]>0&&(g=ln(S,g)),g.slice(0)}function t(m){if(m>=Ht.length)for(let j=Ht.length;j<=m;j++){const S=new Uint8Array([0]);let f=Ht[j-1].slice(0);for(let d=f.length-1;d>=0;d--){const g=new Uint8Array([(f[d]<<1)+S[0]]);S[0]=g[0]/10,f[d]=g[0]%10}S[0]>0&&(f=ln(S,f)),Ht.push(f)}return Ht[m]}function n(m,j){let S=0,f=new Uint8Array(m),d=new Uint8Array(j),g=f.slice(0);const v=g.length-1;let x=d.slice(0);const k=x.length-1;let L,ie=0;for(let ee=k;ee>=0;ee--,ie++)switch(L=g[v-ie]-x[k-ie]-S,!0){case L<0:S=1,g[v-ie]=L+10;break;default:S=0,g[v-ie]=L}if(S>0)for(let ee=v-k+1;ee>=0;ee--,ie++)if(L=g[v-ie]-S,L<0)S=1,g[v-ie]=L+10;else{S=0,g[v-ie]=L;break}return g.slice()}const i=this._valueHex.byteLength*8-1;let o=new Uint8Array(this._valueHex.byteLength*8/3),s=0,a;const c=new Uint8Array(this._valueHex);let u="",w=!1;for(let m=this._valueHex.byteLength-1;m>=0;m--){a=c[m];for(let j=0;j<8;j++){if((a&1)==1)switch(s){case i:o=n(t(s),o),u="-";break;default:o=e(o,t(s))}s++,a>>=1}}for(let m=0;m<o.length;m++)o[m]&&(w=!0),w&&(u+=Io.charAt(o[m]));return w===!1&&(u+=Io.charAt(0)),u}}class De extends X{constructor(e={}){super(e,Al);this.idBlock.tagClass=1,this.idBlock.tagNumber=2}static blockName(){return"INTEGER"}isEqual(e){return e instanceof De?this.valueBlock.isHexOnly&&e.valueBlock.isHexOnly?Co(this.valueBlock.valueHex,e.valueBlock.valueHex):this.valueBlock.isHexOnly===e.valueBlock.isHexOnly?this.valueBlock.valueDec===e.valueBlock.valueDec:!1:e instanceof ArrayBuffer?Co(this.valueBlock.valueHex,e):!1}convertToDER(){const e=new De({valueHex:this.valueBlock.valueHex});return e.valueBlock.toDER(),e}convertFromDER(){const e=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,t=new De({valueHex:this.valueBlock.valueHex});return t.valueBlock.fromDER(t.valueBlock.valueHex,0,t.valueBlock.valueHex.byteLength,e),t}toString(){const e=Be(this.valueBlock.valueHex),t=BigInt(`0x${e}`);return`${this.constructor.blockName()} : ${t.toString()}`}}class un extends De{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=10}static blockName(){return"ENUMERATED"}}class No extends ke(de){constructor(e={}){super(e);this.valueDec=V(e,"valueDec",-1),this.isFirstSid=V(e,"isFirstSid",!1)}static blockName(){return"sidBlock"}fromBER(e,t,n){if(n===0)return t;if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);this.valueHex=new ArrayBuffer(n);let o=new Uint8Array(this.valueHex);for(let c=0;c<n&&(o[c]=i[c]&127,this.blockLength++,(i[c]&128)!=0);c++);const s=new ArrayBuffer(this.blockLength),a=new Uint8Array(s);for(let c=0;c<this.blockLength;c++)a[c]=o[c];return this.valueHex=s.slice(0),o=new Uint8Array(this.valueHex),(i[this.blockLength-1]&128)!=0?(this.error="End of input reached before message was fully decoded",-1):(o[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=vt(o,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e=!1){let t,n;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);const o=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),n=new Uint8Array(t);for(let s=0;s<this.blockLength-1;s++)n[s]=o[s]|128;return n[this.blockLength-1]=o[this.blockLength-1],t}const i=Je(this.valueDec,7);if(i.byteLength===0)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),e===!1){const o=new Uint8Array(i);n=new Uint8Array(t);for(let s=0;s<i.byteLength-1;s++)n[s]=o[s]|128;n[i.byteLength-1]=o[i.byteLength-1]}return t}toString(){let e="";if(this.isHexOnly===!0)e=Be(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.valueDec=this.valueDec,e.isFirstSid=this.isFirstSid,e}}class xl extends Ue{constructor(e={}){super(e);this.fromString(V(e,"value",""))}fromBER(e,t,n){let i=t;for(;n>0;){const o=new No;if(i=o.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=o.error,i;this.value.length===0&&(o.isFirstSid=!0),this.blockLength+=o.blockLength,n-=o.blockLength,this.value.push(o)}return i}toBER(e=!1){let t=new ArrayBuffer(0);for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,new ArrayBuffer(0);t=gt(t,i)}return t}fromString(e){this.value=[];let t=0,n=0,i="",o=!1;do if(n=e.indexOf(".",t),n===-1?i=e.substr(t):i=e.substr(t,n-t),t=n+1,o){const s=this.value[0];let a=0;switch(s.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:return this.value=[],!1}const c=parseInt(i,10);if(isNaN(c))return!0;s.valueDec=c+a,o=!1}else{const s=new No;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.length===0&&(s.isFirstSid=!0,o=!0),this.value.push(s)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),t?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}static blockName(){return"ObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}e.value=this.toString(),e.sidArray=[];for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}class fn extends X{constructor(e={}){super(e,xl);this.idBlock.tagClass=1,this.idBlock.tagNumber=6}static blockName(){return"OBJECT IDENTIFIER"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.toString()}`}}class Sl extends ke(de){constructor(e={}){super(e);this.isHexOnly=!0,this.value=""}static blockName(){return"Utf8StringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.value=this.value,e}}class Ye extends X{constructor(e={}){super(e,Sl);"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}static blockName(){return"UTF8String"}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`)}}fromString(e){const t=unescape(encodeURIComponent(e)),n=t.length;this.valueBlock.valueHex=new ArrayBuffer(n);const i=new Uint8Array(this.valueBlock.valueHex);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Oo extends ke(de){constructor(e={}){super(e);this.valueDec=V(e,"valueDec",-1)}static blockName(){return"relativeSidBlock"}fromBER(e,t,n){if(n===0)return t;if(Ne(this,e,t,n)===!1)return-1;const i=new Uint8Array(e,t,n);this.valueHex=new ArrayBuffer(n);let o=new Uint8Array(this.valueHex);for(let c=0;c<n&&(o[c]=i[c]&127,this.blockLength++,(i[c]&128)!=0);c++);const s=new ArrayBuffer(this.blockLength),a=new Uint8Array(s);for(let c=0;c<this.blockLength;c++)a[c]=o[c];return this.valueHex=s.slice(0),o=new Uint8Array(this.valueHex),(i[this.blockLength-1]&128)!=0?(this.error="End of input reached before message was fully decoded",-1):(o[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=vt(o,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e=!1){let t,n;if(this.isHexOnly){if(e===!0)return new ArrayBuffer(this.valueHex.byteLength);const o=new Uint8Array(this.valueHex);t=new ArrayBuffer(this.blockLength),n=new Uint8Array(t);for(let s=0;s<this.blockLength-1;s++)n[s]=o[s]|128;return n[this.blockLength-1]=o[this.blockLength-1],t}const i=Je(this.valueDec,7);if(i.byteLength===0)return this.error="Error during encoding SID value",new ArrayBuffer(0);if(t=new ArrayBuffer(i.byteLength),e===!1){const o=new Uint8Array(i);n=new Uint8Array(t);for(let s=0;s<i.byteLength-1;s++)n[s]=o[s]|128;n[i.byteLength-1]=o[i.byteLength-1]}return t}toString(){let e="";return this.isHexOnly===!0?e=Be(this.valueHex,0,this.valueHex.byteLength):e=this.valueDec.toString(),e}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.valueDec=this.valueDec,e}}class Cl extends Ue{constructor(e={}){super(e);this.fromString(V(e,"value",""))}fromBER(e,t,n){let i=t;for(;n>0;){const o=new Oo;if(i=o.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=o.error,i;this.blockLength+=o.blockLength,n-=o.blockLength,this.value.push(o)}return i}toBER(e=!1){let t=new ArrayBuffer(0);for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,new ArrayBuffer(0);t=gt(t,i)}return t}fromString(e){this.value=[];let t=0,n=0,i="";do{n=e.indexOf(".",t),n===-1?i=e.substr(t):i=e.substr(t,n-t),t=n+1;const o=new Oo;if(o.valueDec=parseInt(i,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),t&&(i=`{${i}}`),e+=i}return e}static blockName(){return"RelativeObjectIdentifierValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}e.value=this.toString(),e.sidArray=[];for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}class Eo extends X{constructor(e={}){super(e,Cl);this.idBlock.tagClass=1,this.idBlock.tagNumber=13}static blockName(){return"RelativeObjectIdentifier"}}class Il extends ke(de){constructor(e={}){super(e);this.isHexOnly=!0,this.value=""}static blockName(){return"BmpStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.value=this.value,e}}class hn extends X{constructor(e={}){super(e,Il);"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}static blockName(){return"BMPString"}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){const t=e.slice(0),n=new Uint8Array(t);for(let i=0;i<n.length;i+=2){const o=n[i];n[i]=n[i+1],n[i+1]=o}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t*2);const n=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<t;i++){const o=Je(e.charCodeAt(i),8),s=new Uint8Array(o);if(s.length>2)continue;const a=2-s.length;for(let c=s.length-1;c>=0;c--)n[i*2+c+a]=s[c]}this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Nl extends ke(de){constructor(e={}){super(e);this.isHexOnly=!0,this.value=""}static blockName(){return"UniversalStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.value=this.value,e}}class pn extends X{constructor(e={}){super(e,Nl);"value"in e&&this.fromString(e.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}static blockName(){return"UniversalString"}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){const t=e.slice(0),n=new Uint8Array(t);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t*4);const n=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<t;i++){const o=Je(e.charCodeAt(i),8),s=new Uint8Array(o);if(s.length>4)continue;const a=4-s.length;for(let c=s.length-1;c>=0;c--)n[i*4+c+a]=s[c]}this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Ol extends ke(de){constructor(e={}){super(e);this.value="",this.isHexOnly=!0}static blockName(){return"SimpleStringValueBlock"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.value=this.value,e}}class $e extends X{constructor(e={}){super(e,Ol);"value"in e&&this.fromString(e.value)}static blockName(){return"SIMPLESTRING"}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(e))}fromString(e){const t=e.length;this.valueBlock.valueHex=new ArrayBuffer(t);const n=new Uint8Array(this.valueBlock.valueHex);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class dn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=18}static blockName(){return"NumericString"}}class yn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=19}static blockName(){return"PrintableString"}}class vn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=20}static blockName(){return"TeletexString"}}class gn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=21}static blockName(){return"VideotexString"}}class mn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=22}static blockName(){return"IA5String"}}class bn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=25}static blockName(){return"GraphicString"}}class Lt extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=26}static blockName(){return"VisibleString"}}class wn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=27}static blockName(){return"GeneralString"}}class Bn extends $e{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=29}static blockName(){return"CharacterString"}}class kn extends Lt{constructor(e={}){super(e);if(this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<e.value.length;n++)t[n]=e.value.charCodeAt(n)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for convertion";return}const i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(){const e=new Array(7);return e[0]=fe(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=fe(this.month,2),e[2]=fe(this.day,2),e[3]=fe(this.hour,2),e[4]=fe(this.minute,2),e[5]=fe(this.second,2),e[6]="Z",e.join("")}static blockName(){return"UTCTime"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e}}class An extends Lt{constructor(e={}){super(e);if(this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,"value"in e){this.fromString(e.value),this.valueBlock.valueHex=new ArrayBuffer(e.value.length);const t=new Uint8Array(this.valueBlock.valueHex);for(let n=0;n<e.value.length;n++)t[n]=e.value.charCodeAt(n)}"valueDate"in e&&(this.fromDate(e.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromBER(e,t,n){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm===!0?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHex),this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length===0&&(this.blockLength+=this.valueBlock.blockLength),i)}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,new Uint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,n="",i="",o=0,s,a=0,c=0;if(e[e.length-1]==="Z")n=e.substr(0,e.length-1),t=!0;else{const m=new Number(e[e.length-1]);if(isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(t){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for convertion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for convertion")}else{let m=1,j=n.indexOf("+"),S="";if(j===-1&&(j=n.indexOf("-"),m=-1),j!==-1){if(S=n.substr(j+1),n=n.substr(0,j),S.length!==2&&S.length!==4)throw new Error("Wrong input string for convertion");let f=new Number(S.substr(0,2));if(isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");if(a=m*f,S.length===4){if(f=new Number(S.substr(2,2)),isNaN(f.valueOf()))throw new Error("Wrong input string for convertion");c=m*f}}}let u=n.indexOf(".");if(u===-1&&(u=n.indexOf(",")),u!==-1){const m=new Number(`0${n.substr(u)}`);if(isNaN(m.valueOf()))throw new Error("Wrong input string for convertion");o=m.valueOf(),i=n.substr(0,u)}else i=n;switch(!0){case i.length===8:if(s=/(\d{4})(\d{2})(\d{2})/ig,u!==-1)throw new Error("Wrong input string for convertion");break;case i.length===10:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let m=60*o;this.minute=Math.floor(m),m=60*(m-this.minute),this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case i.length===12:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let m=60*o;this.second=Math.floor(m),m=1e3*(m-this.second),this.millisecond=Math.floor(m)}break;case i.length===14:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){const m=1e3*o;this.millisecond=Math.floor(m)}break;default:throw new Error("Wrong input string for convertion")}const w=s.exec(i);if(w===null)throw new Error("Wrong input string for convertion");for(let m=1;m<w.length;m++)switch(m){case 1:this.year=parseInt(w[m],10);break;case 2:this.month=parseInt(w[m],10);break;case 3:this.day=parseInt(w[m],10);break;case 4:this.hour=parseInt(w[m],10)+a;break;case 5:this.minute=parseInt(w[m],10)+c;break;case 6:this.second=parseInt(w[m],10);break;default:throw new Error("Wrong input string for convertion")}if(t===!1){const m=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=m.getUTCFullYear(),this.month=m.getUTCMonth(),this.day=m.getUTCDay(),this.hour=m.getUTCHours(),this.minute=m.getUTCMinutes(),this.second=m.getUTCSeconds(),this.millisecond=m.getUTCMilliseconds()}}toString(){const e=[];return e.push(fe(this.year,4)),e.push(fe(this.month,2)),e.push(fe(this.day,2)),e.push(fe(this.hour,2)),e.push(fe(this.minute,2)),e.push(fe(this.second,2)),this.millisecond!==0&&(e.push("."),e.push(fe(this.millisecond,3))),e.push("Z"),e.join("")}static blockName(){return"GeneralizedTime"}toJSON(){let e={};try{e=super.toJSON()}catch{}return e.year=this.year,e.month=this.month,e.day=this.day,e.hour=this.hour,e.minute=this.minute,e.second=this.second,e.millisecond=this.millisecond,e}}class Po extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=31}static blockName(){return"DATE"}}class jo extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=32}static blockName(){return"TimeOfDay"}}class Ro extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=33}static blockName(){return"DateTime"}}class To extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=34}static blockName(){return"Duration"}}class Ho extends Ye{constructor(e={}){super(e);this.idBlock.tagClass=1,this.idBlock.tagNumber=14}static blockName(){return"TIME"}}class xn{constructor(e={}){this.value=V(e,"value",[]),this.optional=V(e,"optional",!1)}}class _t{constructor(e={}){this.name=V(e,"name",""),this.optional=V(e,"optional",!1)}}class nr{constructor(e={}){this.name=V(e,"name",""),this.optional=V(e,"optional",!1),this.value=V(e,"value",new _t),this.local=V(e,"local",!1)}}class El{constructor(e={}){this.data=V(e,"data",new ArrayBuffer(0))}fromBER(e,t,n){return this.data=e.slice(t,n),t+n}toBER(e=!1){return this.data}}function Uo(r,e,t){const n=e;function i(w,m){if(w instanceof m)return w;const j=new m;return j.idBlock=w.idBlock,j.lenBlock=w.lenBlock,j.warnings=w.warnings,j.valueBeforeDecode=w.valueBeforeDecode.slice(0),j}let o=new X({},Object);const s=new de;if(Ne(s,r,e,t)===!1)return o.error=s.error,{offset:-1,result:o};if(new Uint8Array(r,e,t).length===0)return o.error="Zero buffer length",{offset:-1,result:o};let c=o.idBlock.fromBER(r,e,t);if(o.warnings.concat(o.idBlock.warnings),c===-1)return o.error=o.idBlock.error,{offset:-1,result:o};if(e=c,t-=o.idBlock.blockLength,c=o.lenBlock.fromBER(r,e,t),o.warnings.concat(o.lenBlock.warnings),c===-1)return o.error=o.lenBlock.error,{offset:-1,result:o};if(e=c,t-=o.lenBlock.blockLength,o.idBlock.isConstructed===!1&&o.lenBlock.isIndefiniteForm===!0)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let u=X;switch(o.idBlock.tagClass){case 1:if(o.idBlock.tagNumber>=37&&o.idBlock.isHexOnly===!1)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed===!0&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};u=mt;break;case 1:u=cn;break;case 2:u=De;break;case 3:u=_e;break;case 4:u=Le;break;case 5:u=bt;break;case 6:u=fn;break;case 10:u=un;break;case 12:u=Ye;break;case 13:u=Eo;break;case 14:u=Ho;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:u=Ke;break;case 17:u=Ze;break;case 18:u=dn;break;case 19:u=yn;break;case 20:u=vn;break;case 21:u=gn;break;case 22:u=mn;break;case 23:u=kn;break;case 24:u=An;break;case 25:u=bn;break;case 26:u=Lt;break;case 27:u=wn;break;case 28:u=pn;break;case 29:u=Bn;break;case 30:u=hn;break;case 31:u=Po;break;case 32:u=jo;break;case 33:u=Ro;break;case 34:u=To;break;default:{let w;o.idBlock.isConstructed===!0?w=new le:w=new Ut,w.idBlock=o.idBlock,w.lenBlock=o.lenBlock,w.warnings=o.warnings,o=w}}break;case 2:case 3:case 4:default:o.idBlock.isConstructed===!0?u=le:u=Ut}return o=i(o,u),c=o.fromBER(r,e,o.lenBlock.isIndefiniteForm===!0?t:o.lenBlock.length),o.valueBeforeDecode=r.slice(n,n+o.blockLength),{offset:c,result:o}}function Oe(r){if(r.byteLength===0){const e=new X({},Object);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Uo(r,0,r.byteLength)}function it(r,e,t){if(t instanceof xn){for(let o=0;o<t.value.length;o++)if(it(r,e,t.value[o]).verified===!0)return{verified:!0,result:r};{const o={verified:!1,result:{error:"Wrong values for Choice type"}};return t.hasOwnProperty("name")&&(o.name=t.name),o}}if(t instanceof _t)return t.hasOwnProperty("name")&&(r[t.name]=e),{verified:!0,result:r};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in t))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=t.idBlock.toBER(!1);if(n.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(t.idBlock.fromBER(n,0,n.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(t.idBlock.hasOwnProperty("tagClass")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:r};if(t.idBlock.hasOwnProperty("tagNumber")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:r};if(t.idBlock.hasOwnProperty("isConstructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:r};if(!("isHexOnly"in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:r};if(t.idBlock.isHexOnly===!0){if(!("valueHex"in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const o=new Uint8Array(t.idBlock.valueHex),s=new Uint8Array(e.idBlock.valueHex);if(o.length!==s.length)return{verified:!1,result:r};for(let a=0;a<o.length;a++)if(o[a]!==s[1])return{verified:!1,result:r}}if(t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&(r[t.name]=e)),t.idBlock.isConstructed===!0){let o=0,s={verified:!1},a=t.valueBlock.value.length;if(a>0&&t.valueBlock.value[0]instanceof nr&&(a=e.valueBlock.value.length),a===0)return{verified:!0,result:r};if(e.valueBlock.value.length===0&&t.valueBlock.value.length!==0){let c=!0;for(let u=0;u<t.valueBlock.value.length;u++)c=c&&(t.valueBlock.value[u].optional||!1);return c===!0?{verified:!0,result:r}:(t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&delete r[t.name]),r.error="Inconsistent object length",{verified:!1,result:r})}for(let c=0;c<a;c++)if(c-o>=e.valueBlock.value.length){if(t.valueBlock.value[c].optional===!1){const u={verified:!1,result:r};return r.error="Inconsistent length between ASN.1 data and schema",t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&(delete r[t.name],u.name=t.name)),u}}else if(t.valueBlock.value[0]instanceof nr){if(s=it(r,e.valueBlock.value[c],t.valueBlock.value[0].value),s.verified===!1)if(t.valueBlock.value[0].optional===!0)o++;else return t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&delete r[t.name]),s;if("name"in t.valueBlock.value[0]&&t.valueBlock.value[0].name.length>0){let u={};"local"in t.valueBlock.value[0]&&t.valueBlock.value[0].local===!0?u=e:u=r,typeof u[t.valueBlock.value[0].name]=="undefined"&&(u[t.valueBlock.value[0].name]=[]),u[t.valueBlock.value[0].name].push(e.valueBlock.value[c])}}else if(s=it(r,e.valueBlock.value[c-o],t.valueBlock.value[c]),s.verified===!1)if(t.valueBlock.value[c].optional===!0)o++;else return t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&delete r[t.name]),s;if(s.verified===!1){const c={verified:!1,result:r};return t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&(delete r[t.name],c.name=t.name)),c}return{verified:!0,result:r}}if("primitiveSchema"in t&&"valueHex"in e.valueBlock){const o=Oe(e.valueBlock.valueHex);if(o.offset===-1){const s={verified:!1,result:o.result};return t.hasOwnProperty("name")&&(t.name=t.name.replace(/^\s+|\s+$/g,""),t.name!==""&&(delete r[t.name],s.name=t.name)),s}return it(r,o.result,t.primitiveSchema)}return{verified:!0,result:r}}function Pl(r,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const t=Oe(r);return t.offset===-1?{verified:!1,result:t.result}:it(t.result,t.result,e)}function jl(r){}var Lo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",HexBlock:ke,ValueBlock:Ue,BaseBlock:X,Primitive:Ut,Constructed:le,EndOfContent:mt,Boolean:cn,Sequence:Ke,Set:Ze,Null:bt,OctetString:Le,BitString:_e,Integer:De,Enumerated:un,ObjectIdentifier:fn,Utf8String:Ye,RelativeObjectIdentifier:Eo,BmpString:hn,UniversalString:pn,NumericString:dn,PrintableString:yn,TeletexString:vn,VideotexString:gn,IA5String:mn,GraphicString:bn,VisibleString:Lt,GeneralString:wn,CharacterString:Bn,UTCTime:kn,GeneralizedTime:An,DATE:Po,TimeOfDay:jo,DateTime:Ro,Duration:To,TIME:Ho,Choice:xn,Any:_t,Repeated:nr,RawData:El,fromBER:Oe,compareSchema:it,verifySchema:Pl,fromJSON:jl}),A;(function(r){r[r.Sequence=0]="Sequence",r[r.Set=1]="Set",r[r.Choice=2]="Choice"})(A||(A={}));var h;(function(r){r[r.Any=1]="Any",r[r.Boolean=2]="Boolean",r[r.OctetString=3]="OctetString",r[r.BitString=4]="BitString",r[r.Integer=5]="Integer",r[r.Enumerated=6]="Enumerated",r[r.ObjectIdentifier=7]="ObjectIdentifier",r[r.Utf8String=8]="Utf8String",r[r.BmpString=9]="BmpString",r[r.UniversalString=10]="UniversalString",r[r.NumericString=11]="NumericString",r[r.PrintableString=12]="PrintableString",r[r.TeletexString=13]="TeletexString",r[r.VideotexString=14]="VideotexString",r[r.IA5String=15]="IA5String",r[r.GraphicString=16]="GraphicString",r[r.VisibleString=17]="VisibleString",r[r.GeneralString=18]="GeneralString",r[r.CharacterString=19]="CharacterString",r[r.UTCTime=20]="UTCTime",r[r.GeneralizedTime=21]="GeneralizedTime",r[r.DATE=22]="DATE",r[r.TimeOfDay=23]="TimeOfDay",r[r.DateTime=24]="DateTime",r[r.Duration=25]="Duration",r[r.TIME=26]="TIME",r[r.Null=27]="Null"})(h||(h={}));const Rl={fromASN:r=>r instanceof bt?null:r.valueBeforeDecode,toASN:r=>{if(r===null)return new bt;const e=Oe(r);if(e.result.error)throw new Error(e.result.error);return e.result}},Tl={fromASN:r=>r.valueBlock.valueHex.byteLength>4?r.valueBlock.toString():r.valueBlock.valueDec,toASN:r=>new De({value:r})},Hl={fromASN:r=>r.valueBlock.valueDec,toASN:r=>new un({value:r})},W={fromASN:r=>r.valueBlock.valueHex,toASN:r=>new De({valueHex:r})},Ul={fromASN:r=>r.valueBlock.valueHex,toASN:r=>new _e({valueHex:r})},Ll={fromASN:r=>r.valueBlock.toString(),toASN:r=>new fn({value:r})},_l={fromASN:r=>r.valueBlock.value,toASN:r=>new cn({value:r})},ir={fromASN:r=>r.valueBlock.valueHex,toASN:r=>new Le({valueHex:r})};function ye(r){return{fromASN:e=>e.valueBlock.value,toASN:e=>new r({value:e})}}const _o=ye(Ye),Dl=ye(hn),$l=ye(pn),Vl=ye(dn),Ml=ye(yn),Fl=ye(vn),zl=ye(gn),ql=ye(mn),Gl=ye(bn),Wl=ye(Lt),Jl=ye(wn),Kl=ye(Bn),Zl={fromASN:r=>r.toDate(),toASN:r=>new kn({valueDate:r})},Yl={fromASN:r=>r.toDate(),toASN:r=>new An({valueDate:r})},Xl={fromASN:r=>null,toASN:r=>new bt};function Sn(r){switch(r){case h.Any:return Rl;case h.BitString:return Ul;case h.BmpString:return Dl;case h.Boolean:return _l;case h.CharacterString:return Kl;case h.Enumerated:return Hl;case h.GeneralString:return Jl;case h.GeneralizedTime:return Yl;case h.GraphicString:return Gl;case h.IA5String:return ql;case h.Integer:return Tl;case h.Null:return Xl;case h.NumericString:return Vl;case h.ObjectIdentifier:return Ll;case h.OctetString:return ir;case h.PrintableString:return Ml;case h.TeletexString:return Fl;case h.UTCTime:return Zl;case h.UniversalString:return $l;case h.Utf8String:return _o;case h.VideotexString:return zl;case h.VisibleString:return Wl;default:return null}}class H{static isArrayBuffer(e){return Object.prototype.toString.call(e)==="[object ArrayBuffer]"}static toArrayBuffer(e){const t=this.toUint8Array(e);return t.byteOffset||t.length?t.buffer.slice(t.byteOffset,t.byteOffset+t.length):t.buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(typeof Buffer!="undefined"&&Buffer.isBuffer(e))return new t(e.buffer,e.byteOffset,e.byteLength);if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const n=H.toUint8Array(e),i=H.toUint8Array(t);if(n.length!==i.byteLength)return!1;for(let o=0;o<n.length;o++)if(n[o]!==i[o])return!1;return!0}}class Do{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer}static toString(e){const t=H.toUint8Array(e);let n="";for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return decodeURIComponent(escape(n))}}class Ee{static toString(e,t=!1){const n=H.toArrayBuffer(e),i=new DataView(n);let o="";for(let s=0;s<n.byteLength;s+=2){const a=i.getUint16(s,t);o+=String.fromCharCode(a)}return o}static fromString(e,t=!1){const n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let o=0;o<e.length;o++)i.setUint16(o*2,e.charCodeAt(o),t);return n}}class T{static isHex(e){return typeof e=="string"&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return typeof e=="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return typeof e=="string"&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,t="utf8"){const n=H.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Ee.toString(n,!0);case"utf16":case"utf16be":return Ee.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ee.fromString(e,!0);case"utf16":case"utf16be":return Ee.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=H.toUint8Array(e);if(typeof btoa!="undefined"){const n=this.ToString(t,"binary");return btoa(n)}else return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!T.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob!="undefined"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!T.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=T.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Do.fromString(e);case"utf16":case"utf16be":return Ee.fromString(e);case"utf16le":case"usc2":return Ee.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=T.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Do.toString(e);case"utf16":case"utf16be":return Ee.toString(e);case"utf16le":case"usc2":return Ee.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){const t=H.toUint8Array(e);let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n}static ToHex(e){const t=H.toUint8Array(e),n="",i=[],o=t.length;for(let s=0;s<o;s++){const a=t[s].toString(16).padStart(2,"0");i.push(a)}return i.join(n)}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!T.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let i=0;i<t.length;i=i+2){const o=t.slice(i,i+2);n[i/2]=parseInt(o,16)}return n.buffer}static ToUtf16String(e,t=!1){return Ee.toString(e,t)}static FromUtf16String(e,t=!1){return Ee.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}T.DEFAULT_UTF8_ENCODING="utf8";function Ql(...r){const e=r.map(i=>i.byteLength).reduce((i,o)=>i+o),t=new Uint8Array(e);let n=0;return r.map(i=>new Uint8Array(i)).forEach(i=>{for(const o of i)t[n++]=o}),t.buffer}function ec(r,e){if(!(r&&e)||r.byteLength!==e.byteLength)return!1;const t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<r.byteLength;i++)if(t[i]!==n[i])return!1;return!0}class or{constructor(e,t=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(H.isBufferSource(e))this.unusedBits=t,this.value=H.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof _e))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new _e({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new _e({name:e})}toNumber(){let e="";const t=new Uint8Array(this.value);for(const n of t)e+=n.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let t=e.toString(2);const n=t.length+7>>3;this.unusedBits=(n<<3)-t.length;const i=new Uint8Array(n);t=t.padStart(n<<3,"0").split("").reverse().join("");let o=0;for(;o<n;)i[o]=parseInt(t.slice(o<<3,(o<<3)+8),2),o++;this.value=i.buffer}}class Z{constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):H.isBufferSource(e)?this.buffer=H.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(e){if(!(e instanceof Le))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Le({valueHex:this.buffer})}toSchema(e){return new Le({name:e})}}function Ve(r){return r&&r.prototype?r.prototype.toASN&&r.prototype.fromASN?!0:Ve(r.prototype):!!(r&&r.toASN&&r.fromASN)}function $o(r){var e;if(r){const t=Object.getPrototypeOf(r);return((e=t==null?void 0:t.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:$o(t)}return!1}function tc(r,e){if(!(r&&e)||r.byteLength!==e.byteLength)return!1;const t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<r.byteLength;i++)if(t[i]!==n[i])return!1;return!0}class rc{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e){var t,n,i,o;const s=this.items.get(e);if(!s)throw new Error(`Cannot get schema for '${(o=(i=(n=(t=e)===null||t===void 0?void 0:t.prototype)===null||n===void 0?void 0:n.constructor)===null||i===void 0?void 0:i.name)!==null&&o!==void 0?o:e}' target`);return s}cache(e){const t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){const t={type:A.Sequence,items:{}},n=this.findParentSchema(e);return n&&(Object.assign(t,n),t.items=Object.assign({},t.items,n.items)),t}create(e,t){const n=this.items.get(e)||this.createDefault(e),i=[];for(const o in n.items){const s=n.items[o],a=t?o:"";let c;if(typeof s.type=="number"){const w=h[s.type],m=Lo[w];if(!m)throw new Error(`Cannot get ASN1 class by name '${w}'`);c=new m({name:a})}else Ve(s.type)?c=new s.type().toSchema(a):s.optional?this.get(s.type).type===A.Choice?c=new _t({name:a}):(c=this.create(s.type,!1),c.name=a):c=new _t({name:a});const u=!!s.optional||s.defaultValue!==void 0;if(s.repeated){c.name="";const w=s.repeated==="set"?Ze:Ke;c=new w({name:"",value:[new nr({name:a,value:c})]})}if(s.context!==null&&s.context!==void 0)if(s.implicit)if(typeof s.type=="number"||Ve(s.type)){const w=s.repeated?le:Ut;i.push(new w({name:a,optional:u,idBlock:{tagClass:3,tagNumber:s.context}}))}else{this.cache(s.type);const w=!!s.repeated;let m=w?c:this.get(s.type).schema;m=m.valueBlock?m.valueBlock.value:m.value,i.push(new le({name:w?"":a,optional:u,idBlock:{tagClass:3,tagNumber:s.context},value:m}))}else i.push(new le({optional:u,idBlock:{tagClass:3,tagNumber:s.context},value:[c]}));else c.optional=u,i.push(c)}switch(n.type){case A.Sequence:return new Ke({value:i,name:""});case A.Set:return new Ze({value:i,name:""});case A.Choice:return new xn({value:i,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){const t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}const ve=new rc,C=r=>e=>{let t;ve.has(e)?t=ve.get(e):(t=ve.createDefault(e),ve.set(e,t)),Object.assign(t,r)},l=r=>(e,t)=>{let n;ve.has(e.constructor)?n=ve.get(e.constructor):(n=ve.createDefault(e.constructor),ve.set(e.constructor,n));const i=Object.assign({},r);if(typeof i.type=="number"&&!i.converter){const o=Sn(r.type);if(!o)throw new Error(`Cannot get default converter for property '${t}' of ${e.constructor.name}`);i.converter=o}n.items[t]=i};class Vo extends Error{constructor(){super(...arguments);this.schemas=[]}}class nc{static parse(e,t){let n;if(e instanceof ArrayBuffer)n=e;else if(typeof Buffer!="undefined"&&Buffer.isBuffer(e))n=new Uint8Array(e).buffer;else if(ArrayBuffer.isView(e)||e.buffer instanceof ArrayBuffer)n=e.buffer;else throw new TypeError("Wrong type of 'data' argument");const i=Oe(n);if(i.result.error)throw new Error(i.result.error);return this.fromASN(i.result,t)}static fromASN(e,t){var n;try{if(Ve(t))return new t().fromASN(e);const i=ve.get(t);ve.cache(t);let o=i.schema;if(e.constructor===le&&i.type!==A.Choice){o=new le({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:i.schema.valueBlock.value});for(const c in i.items)delete e[c]}const s=it(e,e,o);if(!s.verified)throw new Vo(`Data does not match to ${t.name} ASN1 schema. ${s.result.error}`);const a=new t;if($o(t))if(typeof i.itemType=="number"){const c=Sn(i.itemType);if(!c)throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`);return t.from(e.valueBlock.value,u=>c.fromASN(u))}else return t.from(e.valueBlock.value,c=>this.fromASN(c,i.itemType));for(const c in i.items){if(!e[c])continue;const u=i.items[c];if(typeof u.type=="number"||Ve(u.type)){const w=(n=u.converter)!==null&&n!==void 0?n:Ve(u.type)?new u.type:null;if(!w)throw new Error("Converter is empty");if(u.repeated)if(u.implicit){const m=u.repeated==="sequence"?Ke:Ze,j=new m;j.valueBlock=e[c].valueBlock;const S=Oe(j.toBER(!1)).result.valueBlock.value;a[c]=Array.from(S,f=>w.fromASN(f))}else a[c]=Array.from(e[c],m=>w.fromASN(m));else{let m=e[c];if(u.implicit){let j;if(Ve(u.type))j=new u.type().toSchema("");else{const S=h[u.type],f=Lo[S];if(!f)throw new Error(`Cannot get '${S}' class from asn1js module`);j=new f}j.valueBlock=m.valueBlock,m=Oe(j.toBER(!1)).result}a[c]=w.fromASN(m)}}else u.repeated?a[c]=Array.from(e[c],w=>this.fromASN(w,u.type)):a[c]=this.fromASN(e[c],u.type)}return a}catch(i){throw i instanceof Vo&&i.schemas.push(t.name),i}}}class Cn{static serialize(e){return e instanceof X?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&Ve(e.constructor))return e.toASN();const t=e.constructor,n=ve.get(t);ve.cache(t);let i=[];if(n.itemType)if(typeof n.itemType=="number"){const s=Sn(n.itemType);if(!s)throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`);i=e.map(a=>s.toASN(a))}else i=e.map(s=>this.toAsnItem({type:n.itemType},"[]",t,s));else for(const s in n.items){const a=n.items[s],c=e[s];if(c===void 0||a.defaultValue===c||typeof a.defaultValue=="object"&&typeof c=="object"&&tc(this.serialize(a.defaultValue),this.serialize(c)))continue;let u=Cn.toAsnItem(a,s,t,c);if(typeof a.context=="number")if(a.implicit)if(!a.repeated&&(typeof a.type=="number"||Ve(a.type))){const w={};w.valueHex=u instanceof bt?u.valueBeforeDecode:u.valueBlock.toBER(),i.push(new Ut(Object.assign({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context}},w)))}else i.push(new le({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:u.valueBlock.value}));else i.push(new le({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:[u]}));else a.repeated?i=i.concat(u):i.push(u)}let o;switch(n.type){case A.Sequence:o=new Ke({value:i});break;case A.Set:o=new Ze({value:i});break;case A.Choice:if(!i[0])throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`);o=i[0];break}return o}static toAsnItem(e,t,n,i){let o;if(typeof e.type=="number"){const s=e.converter;if(!s)throw new Error(`Property '${t}' doesn't have converter for type ${h[e.type]} in schema '${n.name}'`);if(e.repeated){const a=Array.from(i,u=>s.toASN(u)),c=e.repeated==="sequence"?Ke:Ze;o=new c({value:a})}else o=s.toASN(i)}else if(e.repeated){const s=Array.from(i,c=>this.toASN(c)),a=e.repeated==="sequence"?Ke:Ze;o=new a({value:s})}else o=this.toASN(i);return o}}class q extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const t of e)this.push(t)}}}class R{static serialize(e){return Cn.serialize(e)}static parse(e,t){return nc.parse(e,t)}static toString(e){const t=H.isBufferSource(e)?H.toArrayBuffer(e):R.serialize(e),n=Oe(t);if(n.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${n.result.error}`);return n.result.toString()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function y(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}var In={exports:{}};(function(r){(function(e){const t="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},i=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${t}\\.${t}\\.${t}\\.${t}(${s})?$`,"i")};function u(f,d){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let g=0,v=-1,x=(f.match(c.zoneIndex)||[])[0],k,L;for(x&&(x=x.substring(1),f=f.replace(/%.+$/,""));(v=f.indexOf(":",v+1))>=0;)g++;if(f.substr(0,2)==="::"&&g--,f.substr(-2,2)==="::"&&g--,g>d)return null;for(L=d-g,k=":";L--;)k+="0:";return f=f.replace("::",k),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),d=function(){const ie=f.split(":"),ee=[];for(let Ge=0;Ge<ie.length;Ge++)ee.push(parseInt(ie[Ge],16));return ee}(),{parts:d,zoneId:x}}function w(f,d,g,v){if(f.length!==d.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let x=0,k;for(;v>0;){if(k=g-v,k<0&&(k=0),f[x]>>k!=d[x]>>k)return!1;v-=g,x+=1}return!0}function m(f){if(o.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(i.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function j(f,d){for(;f.length<d;)f=`0${f}`;return f}const S={};S.IPv4=function(){function f(d){if(d.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let g,v;for(g=0;g<d.length;g++)if(v=d[g],!(0<=v&&v<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=d}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(d,g){let v;if(g===void 0&&(v=d,d=v[0],g=v[1]),d.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return w(this.octets,d.octets,8,g)},f.prototype.prefixLengthFromSubnetMask=function(){let d=0,g=!1;const v={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let x,k,L;for(x=3;x>=0;x-=1)if(k=this.octets[x],k in v){if(L=v[k],g&&L!==0)return null;L!==8&&(g=!0),d+=L}else return null;return 32-d},f.prototype.range=function(){return S.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return S.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),S.IPv4.broadcastAddressFromCIDR=function(f){try{const d=this.parseCIDR(f),g=d[0].toByteArray(),v=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),x=[];let k=0;for(;k<4;)x.push(parseInt(g[k],10)|parseInt(v[k],10)^255),k++;return new this(x)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},S.IPv4.isIPv4=function(f){return this.parser(f)!==null},S.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},S.IPv4.isValidFourPartDecimal=function(f){return!!(S.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},S.IPv4.networkAddressFromCIDR=function(f){let d,g,v,x,k;try{for(d=this.parseCIDR(f),v=d[0].toByteArray(),k=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),x=[],g=0;g<4;)x.push(parseInt(v[g],10)&parseInt(k[g],10)),g++;return new this(x)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},S.IPv4.parse=function(f){const d=this.parser(f);if(d===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(d)},S.IPv4.parseCIDR=function(f){let d;if(d=f.match(/^(.+)\/(\d+)$/)){const g=parseInt(d[2]);if(g>=0&&g<=32){const v=[this.parse(d[1]),g];return Object.defineProperty(v,"toString",{value:function(){return this.join("/")}}),v}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},S.IPv4.parser=function(f){let d,g,v;if(d=f.match(n.fourOctet))return function(){const x=d.slice(1,6),k=[];for(let L=0;L<x.length;L++)g=x[L],k.push(m(g));return k}();if(d=f.match(n.longValue)){if(v=m(d[1]),v>4294967295||v<0)throw new Error("ipaddr: address outside defined range");return function(){const x=[];let k;for(k=0;k<=24;k+=8)x.push(v>>k&255);return x}().reverse()}else return(d=f.match(n.twoOctet))?function(){const x=d.slice(1,4),k=[];if(v=m(x[1]),v>16777215||v<0)throw new Error("ipaddr: address outside defined range");return k.push(m(x[0])),k.push(v>>16&255),k.push(v>>8&255),k.push(v&255),k}():(d=f.match(n.threeOctet))?function(){const x=d.slice(1,5),k=[];if(v=m(x[2]),v>65535||v<0)throw new Error("ipaddr: address outside defined range");return k.push(m(x[0])),k.push(m(x[1])),k.push(v>>8&255),k.push(v&255),k}():null},S.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");const d=[0,0,0,0];let g=0;const v=Math.floor(f/8);for(;g<v;)d[g]=255,g++;return v<4&&(d[v]=Math.pow(2,f%8)-1<<8-f%8),new this(d)},S.IPv6=function(){function f(d,g){let v,x;if(d.length===16)for(this.parts=[],v=0;v<=14;v+=2)this.parts.push(d[v]<<8|d[v+1]);else if(d.length===8)this.parts=d;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(v=0;v<this.parts.length;v++)if(x=this.parts[v],!(0<=x&&x<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");g&&(this.zoneId=g)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],reserved:[[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(d,g){let v;if(g===void 0&&(v=d,d=v[0],g=v[1]),d.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return w(this.parts,d.parts,16,g)},f.prototype.prefixLengthFromSubnetMask=function(){let d=0,g=!1;const v={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let x,k;for(let L=7;L>=0;L-=1)if(x=this.parts[L],x in v){if(k=v[x],g&&k!==0)return null;k!==16&&(g=!0),d+=k}else return null;return 128-d},f.prototype.range=function(){return S.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let d;const g=[],v=this.parts;for(let x=0;x<v.length;x++)d=v[x],g.push(d>>8),g.push(d&255);return g},f.prototype.toFixedLengthString=function(){const d=function(){const v=[];for(let x=0;x<this.parts.length;x++)v.push(j(this.parts[x].toString(16),4));return v}.call(this).join(":");let g="";return this.zoneId&&(g=`%${this.zoneId}`),d+g},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const d=this.parts.slice(-2),g=d[0],v=d[1];return new S.IPv4([g>>8,g&255,v>>8,v&255])},f.prototype.toNormalizedString=function(){const d=function(){const v=[];for(let x=0;x<this.parts.length;x++)v.push(this.parts[x].toString(16));return v}.call(this).join(":");let g="";return this.zoneId&&(g=`%${this.zoneId}`),d+g},f.prototype.toRFC5952String=function(){const d=/((^|:)(0(:|$)){2,})/g,g=this.toNormalizedString();let v=0,x=-1,k;for(;k=d.exec(g);)k[0].length>x&&(v=k.index,x=k[0].length);return x<0?g:`${g.substring(0,v)}::${g.substring(v+x)}`},f.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},f}(),S.IPv6.broadcastAddressFromCIDR=function(f){try{const d=this.parseCIDR(f),g=d[0].toByteArray(),v=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),x=[];let k=0;for(;k<16;)x.push(parseInt(g[k],10)|parseInt(v[k],10)^255),k++;return new this(x)}catch(d){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${d})`)}},S.IPv6.isIPv6=function(f){return this.parser(f)!==null},S.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{const d=this.parser(f);return new this(d.parts,d.zoneId),!0}catch{return!1}},S.IPv6.networkAddressFromCIDR=function(f){let d,g,v,x,k;try{for(d=this.parseCIDR(f),v=d[0].toByteArray(),k=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),x=[],g=0;g<16;)x.push(parseInt(v[g],10)&parseInt(k[g],10)),g++;return new this(x)}catch(L){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${L})`)}},S.IPv6.parse=function(f){const d=this.parser(f);if(d.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(d.parts,d.zoneId)},S.IPv6.parseCIDR=function(f){let d,g,v;if((g=f.match(/^(.+)\/(\d+)$/))&&(d=parseInt(g[2]),d>=0&&d<=128))return v=[this.parse(g[1]),d],Object.defineProperty(v,"toString",{value:function(){return this.join("/")}}),v;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},S.IPv6.parser=function(f){let d,g,v,x,k,L;if(v=f.match(c.deprecatedTransitional))return this.parser(`::ffff:${v[1]}`);if(c.native.test(f))return u(f,8);if((v=f.match(c.transitional))&&(L=v[6]||"",d=u(v[1].slice(0,-1)+L,6),d.parts)){for(k=[parseInt(v[2]),parseInt(v[3]),parseInt(v[4]),parseInt(v[5])],g=0;g<k.length;g++)if(x=k[g],!(0<=x&&x<=255))return null;return d.parts.push(k[0]<<8|k[1]),d.parts.push(k[2]<<8|k[3]),{parts:d.parts,zoneId:d.zoneId}}return null},S.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let g=0;const v=Math.floor(f/8);for(;g<v;)d[g]=255,g++;return v<16&&(d[v]=Math.pow(2,f%8)-1<<8-f%8),new this(d)},S.fromByteArray=function(f){const d=f.length;if(d===4)return new S.IPv4(f);if(d===16)return new S.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},S.isValid=function(f){return S.IPv6.isValid(f)||S.IPv4.isValid(f)},S.parse=function(f){if(S.IPv6.isValid(f))return S.IPv6.parse(f);if(S.IPv4.isValid(f))return S.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},S.parseCIDR=function(f){try{return S.IPv6.parseCIDR(f)}catch{try{return S.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},S.process=function(f){const d=this.parse(f);return d.kind()==="ipv6"&&d.isIPv4MappedAddress()?d.toIPv4Address():d},S.subnetMatch=function(f,d,g){let v,x,k,L;g==null&&(g="unicast");for(x in d)if(Object.prototype.hasOwnProperty.call(d,x)){for(k=d[x],k[0]&&!(k[0]instanceof Array)&&(k=[k]),v=0;v<k.length;v++)if(L=k[v],f.kind()===L[0].kind()&&f.match.apply(f,L))return x}return g},r.exports?r.exports=S:e.ipaddr=S})(an)})(In);class Mo{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const t=parseInt(e.slice(8),16).toString(2).split("").reduce((i,o)=>i+ +o,0);let n=e.slice(0,8).replace(/(.{2})/g,i=>`${parseInt(i,16)}.`);return n=n.slice(0,-1),`${n}/${t}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const t=new Uint8Array(e);return In.exports.fromByteArray(Array.from(t)).toString()}return this.decodeIP(T.ToHex(e))}static fromString(e){const t=In.exports.parse(e);return new Uint8Array(t.toByteArray()).buffer}}var Nn,On,En;let oe=class{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};y([l({type:h.TeletexString})],oe.prototype,"teletexString",void 0);y([l({type:h.PrintableString})],oe.prototype,"printableString",void 0);y([l({type:h.UniversalString})],oe.prototype,"universalString",void 0);y([l({type:h.Utf8String})],oe.prototype,"utf8String",void 0);y([l({type:h.BmpString})],oe.prototype,"bmpString",void 0);oe=y([C({type:A.Choice})],oe);let wt=class extends oe{constructor(e={}){super(e);Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?T.ToHex(this.anyValue):super.toString())}};y([l({type:h.IA5String})],wt.prototype,"ia5String",void 0);y([l({type:h.Any})],wt.prototype,"anyValue",void 0);wt=y([C({type:A.Choice})],wt);class Dt{constructor(e={}){this.type="",this.value=new wt,Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],Dt.prototype,"type",void 0);y([l({type:wt})],Dt.prototype,"value",void 0);let Bt=Nn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Nn.prototype)}};Bt=Nn=y([C({type:A.Set,itemType:Dt})],Bt);let Pn=On=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,On.prototype)}};Pn=On=y([C({type:A.Sequence,itemType:Bt})],Pn);let re=En=class extends Pn{constructor(e){super(e);Object.setPrototypeOf(this,En.prototype)}};re=En=y([C({type:A.Sequence})],re);const ic={fromASN:r=>Mo.toString(ir.fromASN(r)),toASN:r=>ir.toASN(Mo.fromString(r))};class Xe{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],Xe.prototype,"typeId",void 0);y([l({type:h.Any,context:0})],Xe.prototype,"value",void 0);class jn{constructor(e={}){this.partyName=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:oe,optional:!0,context:0,implicit:!0})],jn.prototype,"nameAssigner",void 0);y([l({type:oe,context:1,implicit:!0})],jn.prototype,"partyName",void 0);let $=class{constructor(e={}){Object.assign(this,e)}};y([l({type:Xe,context:0,implicit:!0})],$.prototype,"otherName",void 0);y([l({type:h.IA5String,context:1,implicit:!0})],$.prototype,"rfc822Name",void 0);y([l({type:h.IA5String,context:2,implicit:!0})],$.prototype,"dNSName",void 0);y([l({type:h.Any,context:3,implicit:!0})],$.prototype,"x400Address",void 0);y([l({type:re,context:4,implicit:!1})],$.prototype,"directoryName",void 0);y([l({type:jn,context:5})],$.prototype,"ediPartyName",void 0);y([l({type:h.IA5String,context:6,implicit:!0})],$.prototype,"uniformResourceIdentifier",void 0);y([l({type:h.OctetString,context:7,implicit:!0,converter:ic})],$.prototype,"iPAddress",void 0);y([l({type:h.ObjectIdentifier,context:8,implicit:!0})],$.prototype,"registeredID",void 0);$=y([C({type:A.Choice})],$);const ot="2.5.29";var Rn;class Tn{constructor(e={}){this.accessMethod="",this.accessLocation=new $,Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],Tn.prototype,"accessMethod",void 0);y([l({type:$})],Tn.prototype,"accessLocation",void 0);let Fo=Rn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Rn.prototype)}};Fo=Rn=y([C({type:A.Sequence,itemType:Tn})],Fo);const Hn=`${ot}.35`;class zo extends Z{}class kt{constructor(e={}){e&&Object.assign(this,e)}}y([l({type:zo,context:0,optional:!0,implicit:!0})],kt.prototype,"keyIdentifier",void 0);y([l({type:$,context:1,optional:!0,implicit:!0,repeated:"sequence"})],kt.prototype,"authorityCertIssuer",void 0);y([l({type:h.Integer,context:2,optional:!0,implicit:!0,converter:W})],kt.prototype,"authorityCertSerialNumber",void 0);const qo=`${ot}.19`;class sr{constructor(e={}){this.cA=!1,Object.assign(this,e)}}y([l({type:h.Boolean,defaultValue:!1})],sr.prototype,"cA",void 0);y([l({type:h.Integer,optional:!0})],sr.prototype,"pathLenConstraint",void 0);var Un;let Ae=Un=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Un.prototype)}};Ae=Un=y([C({type:A.Sequence,itemType:$})],Ae);var Ln;let Go=Ln=class extends Ae{constructor(e){super(e);Object.setPrototypeOf(this,Ln.prototype)}};Go=Ln=y([C({type:A.Sequence})],Go);var _n;const Wo=`${ot}.32`;let Me=class{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String}};y([l({type:h.IA5String})],Me.prototype,"ia5String",void 0);y([l({type:h.VisibleString})],Me.prototype,"visibleString",void 0);y([l({type:h.BmpString})],Me.prototype,"bmpString",void 0);y([l({type:h.Utf8String})],Me.prototype,"utf8String",void 0);Me=y([C({type:A.Choice})],Me);class Dn{constructor(e={}){this.organization=new Me,this.noticeNumbers=[],Object.assign(this,e)}}y([l({type:Me})],Dn.prototype,"organization",void 0);y([l({type:h.Integer,repeated:"sequence"})],Dn.prototype,"noticeNumbers",void 0);class $n{constructor(e={}){Object.assign(this,e)}}y([l({type:Dn,optional:!0})],$n.prototype,"noticeRef",void 0);y([l({type:Me,optional:!0})],$n.prototype,"explicitText",void 0);let ar=class{constructor(e={}){Object.assign(this,e)}};y([l({type:h.IA5String})],ar.prototype,"cPSuri",void 0);y([l({type:$n})],ar.prototype,"userNotice",void 0);ar=y([C({type:A.Choice})],ar);class Vn{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],Vn.prototype,"policyQualifierId",void 0);y([l({type:h.Any})],Vn.prototype,"qualifier",void 0);class lr{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],lr.prototype,"policyIdentifier",void 0);y([l({type:Vn,repeated:"sequence",optional:!0})],lr.prototype,"policyQualifiers",void 0);let cr=_n=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,_n.prototype)}};cr=_n=y([C({type:A.Sequence,itemType:lr})],cr);let ur=class{constructor(e=0){this.value=e}};y([l({type:h.Integer})],ur.prototype,"value",void 0);ur=y([C({type:A.Choice})],ur);let Jo=class extends ur{};Jo=y([C({type:A.Choice})],Jo);var Mn,xe;(function(r){r[r.unused=1]="unused",r[r.keyCompromise=2]="keyCompromise",r[r.cACompromise=4]="cACompromise",r[r.affiliationChanged=8]="affiliationChanged",r[r.superseded=16]="superseded",r[r.cessationOfOperation=32]="cessationOfOperation",r[r.certificateHold=64]="certificateHold",r[r.privilegeWithdrawn=128]="privilegeWithdrawn",r[r.aACompromise=256]="aACompromise"})(xe||(xe={}));class Ko extends or{toJSON(){const e=[],t=this.toNumber();return t&xe.aACompromise&&e.push("aACompromise"),t&xe.affiliationChanged&&e.push("affiliationChanged"),t&xe.cACompromise&&e.push("cACompromise"),t&xe.certificateHold&&e.push("certificateHold"),t&xe.cessationOfOperation&&e.push("cessationOfOperation"),t&xe.keyCompromise&&e.push("keyCompromise"),t&xe.privilegeWithdrawn&&e.push("privilegeWithdrawn"),t&xe.superseded&&e.push("superseded"),t&xe.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let At=class{constructor(e={}){Object.assign(this,e)}};y([l({type:$,context:0,repeated:"sequence",implicit:!0})],At.prototype,"fullName",void 0);y([l({type:Bt,context:1,implicit:!0})],At.prototype,"nameRelativeToCRLIssuer",void 0);At=y([C({type:A.Choice})],At);class $t{constructor(e={}){Object.assign(this,e)}}y([l({type:At,context:0,optional:!0})],$t.prototype,"distributionPoint",void 0);y([l({type:Ko,context:1,optional:!0,implicit:!0})],$t.prototype,"reasons",void 0);y([l({type:$,context:2,optional:!0,repeated:"sequence",implicit:!0})],$t.prototype,"cRLIssuer",void 0);let Fn=Mn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Mn.prototype)}};Fn=Mn=y([C({type:A.Sequence,itemType:$t})],Fn);var zn;let Zo=zn=class extends Fn{constructor(e){super(e);Object.setPrototypeOf(this,zn.prototype)}};Zo=zn=y([C({type:A.Sequence,itemType:$t})],Zo);class se{constructor(e={}){this.onlyContainsUserCerts=se.ONLY,this.onlyContainsCACerts=se.ONLY,this.indirectCRL=se.ONLY,this.onlyContainsAttributeCerts=se.ONLY,Object.assign(this,e)}}se.ONLY=!1;y([l({type:At,context:0,optional:!0})],se.prototype,"distributionPoint",void 0);y([l({type:h.Boolean,context:1,defaultValue:se.ONLY})],se.prototype,"onlyContainsUserCerts",void 0);y([l({type:h.Boolean,context:2,defaultValue:se.ONLY})],se.prototype,"onlyContainsCACerts",void 0);y([l({type:Ko,context:3,optional:!0})],se.prototype,"onlySomeReasons",void 0);y([l({type:h.Boolean,context:4,defaultValue:se.ONLY})],se.prototype,"indirectCRL",void 0);y([l({type:h.Boolean,context:5,defaultValue:se.ONLY})],se.prototype,"onlyContainsAttributeCerts",void 0);var Vt;(function(r){r[r.unspecified=0]="unspecified",r[r.keyCompromise=1]="keyCompromise",r[r.cACompromise=2]="cACompromise",r[r.affiliationChanged=3]="affiliationChanged",r[r.superseded=4]="superseded",r[r.cessationOfOperation=5]="cessationOfOperation",r[r.certificateHold=6]="certificateHold",r[r.removeFromCRL=8]="removeFromCRL",r[r.privilegeWithdrawn=9]="privilegeWithdrawn",r[r.aACompromise=10]="aACompromise"})(Vt||(Vt={}));let qn=class{constructor(e=Vt.unspecified){this.reason=Vt.unspecified,this.reason=e}toJSON(){return Vt[this.reason]}toString(){return this.toJSON()}};y([l({type:h.Enumerated})],qn.prototype,"reason",void 0);qn=y([C({type:A.Choice})],qn);var Gn;const Yo=`${ot}.37`;let fr=Gn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Gn.prototype)}};fr=Gn=y([C({type:A.Sequence,itemType:h.ObjectIdentifier})],fr);let Wn=class{constructor(e=new ArrayBuffer(0)){this.value=e}};y([l({type:h.Integer,converter:W})],Wn.prototype,"value",void 0);Wn=y([C({type:A.Choice})],Wn);let Jn=class{constructor(e){this.value=new Date,e&&(this.value=e)}};y([l({type:h.GeneralizedTime})],Jn.prototype,"value",void 0);Jn=y([C({type:A.Choice})],Jn);var Kn;let Xo=Kn=class extends Ae{constructor(e){super(e);Object.setPrototypeOf(this,Kn.prototype)}};Xo=Kn=y([C({type:A.Sequence})],Xo);const Qo=`${ot}.15`;var Se;(function(r){r[r.digitalSignature=1]="digitalSignature",r[r.nonRepudiation=2]="nonRepudiation",r[r.keyEncipherment=4]="keyEncipherment",r[r.dataEncipherment=8]="dataEncipherment",r[r.keyAgreement=16]="keyAgreement",r[r.keyCertSign=32]="keyCertSign",r[r.cRLSign=64]="cRLSign",r[r.encipherOnly=128]="encipherOnly",r[r.decipherOnly=256]="decipherOnly"})(Se||(Se={}));class es extends or{toJSON(){const e=this.toNumber(),t=[];return e&Se.cRLSign&&t.push("crlSign"),e&Se.dataEncipherment&&t.push("dataEncipherment"),e&Se.decipherOnly&&t.push("decipherOnly"),e&Se.digitalSignature&&t.push("digitalSignature"),e&Se.encipherOnly&&t.push("encipherOnly"),e&Se.keyAgreement&&t.push("keyAgreement"),e&Se.keyCertSign&&t.push("keyCertSign"),e&Se.keyEncipherment&&t.push("keyEncipherment"),e&Se.nonRepudiation&&t.push("nonRepudiation"),t}toString(){return`[${this.toJSON().join(", ")}]`}}var Zn;class hr{constructor(e={}){this.base=new $,this.minimum=0,Object.assign(this,e)}}y([l({type:$})],hr.prototype,"base",void 0);y([l({type:h.Integer,context:0,defaultValue:0,implicit:!0})],hr.prototype,"minimum",void 0);y([l({type:h.Integer,context:1,optional:!0,implicit:!0})],hr.prototype,"maximum",void 0);let pr=Zn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Zn.prototype)}};pr=Zn=y([C({type:A.Sequence,itemType:hr})],pr);class ts{constructor(e={}){Object.assign(this,e)}}y([l({type:pr,context:0,optional:!0,implicit:!0})],ts.prototype,"permittedSubtrees",void 0);y([l({type:pr,context:1,optional:!0,implicit:!0})],ts.prototype,"excludedSubtrees",void 0);class rs{constructor(e={}){Object.assign(this,e)}}y([l({type:h.Integer,context:0,implicit:!0,optional:!0,converter:W})],rs.prototype,"requireExplicitPolicy",void 0);y([l({type:h.Integer,context:1,implicit:!0,optional:!0,converter:W})],rs.prototype,"inhibitPolicyMapping",void 0);class ns{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],ns.prototype,"issuerDomainPolicy",void 0);y([l({type:h.ObjectIdentifier})],ns.prototype,"subjectDomainPolicy",void 0);var Yn;const is=`${ot}.17`;let dr=Yn=class extends Ae{constructor(e){super(e);Object.setPrototypeOf(this,Yn.prototype)}};dr=Yn=y([C({type:A.Sequence})],dr);class Fe{constructor(e={}){this.type="",this.values=[],Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],Fe.prototype,"type",void 0);y([l({type:h.Any,repeated:"set"})],Fe.prototype,"values",void 0);var Xn;let os=Xn=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Xn.prototype)}};os=Xn=y([C({type:A.Sequence,itemType:Fe})],os);const ss=`${ot}.14`;class Qn extends zo{}class as{constructor(e={}){Object.assign(this,e)}}y([l({type:h.GeneralizedTime,context:0,implicit:!0,optional:!0})],as.prototype,"notBefore",void 0);y([l({type:h.GeneralizedTime,context:1,implicit:!0,optional:!0})],as.prototype,"notAfter",void 0);var Mt;(function(r){r[r.keyUpdateAllowed=1]="keyUpdateAllowed",r[r.newExtensions=2]="newExtensions",r[r.pKIXCertificate=4]="pKIXCertificate"})(Mt||(Mt={}));class ls extends or{toJSON(){const e=[],t=this.toNumber();return t&Mt.pKIXCertificate&&e.push("pKIXCertificate"),t&Mt.newExtensions&&e.push("newExtensions"),t&Mt.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class cs{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new ls,Object.assign(this,e)}}y([l({type:h.GeneralString})],cs.prototype,"entrustVers",void 0);y([l({type:ls})],cs.prototype,"entrustInfoFlags",void 0);class E{constructor(e={}){this.algorithm="",Object.assign(this,e)}}y([l({type:h.ObjectIdentifier})],E.prototype,"algorithm",void 0);y([l({type:h.Any,optional:!0})],E.prototype,"parameters",void 0);class Qe{constructor(e={}){this.algorithm=new E,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:E})],Qe.prototype,"algorithm",void 0);y([l({type:h.BitString})],Qe.prototype,"subjectPublicKey",void 0);let ae=class{constructor(e){e&&(typeof e=="string"||typeof e=="number"?this.utcTime=new Date(e):e instanceof Date?this.utcTime=e:Object.assign(this,e))}getTime(){const e=this.utcTime||this.generalTime;if(!e)throw new Error("Cannot get time from CHOICE object");return e}};y([l({type:h.UTCTime})],ae.prototype,"utcTime",void 0);y([l({type:h.GeneralizedTime})],ae.prototype,"generalTime",void 0);ae=y([C({type:A.Choice})],ae);class yr{constructor(e){this.notBefore=new ae(new Date),this.notAfter=new ae(new Date),e&&(this.notBefore=new ae(e.notBefore),this.notAfter=new ae(e.notAfter))}}y([l({type:ae})],yr.prototype,"notBefore",void 0);y([l({type:ae})],yr.prototype,"notAfter",void 0);var ei;class ge{constructor(e={}){this.extnID="",this.critical=ge.CRITICAL,this.extnValue=new Z,Object.assign(this,e)}}ge.CRITICAL=!1;y([l({type:h.ObjectIdentifier})],ge.prototype,"extnID",void 0);y([l({type:h.Boolean,defaultValue:ge.CRITICAL})],ge.prototype,"critical",void 0);y([l({type:Z})],ge.prototype,"extnValue",void 0);let st=ei=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,ei.prototype)}};st=ei=y([C({type:A.Sequence,itemType:ge})],st);var vr;(function(r){r[r.v1=0]="v1",r[r.v2=1]="v2",r[r.v3=2]="v3"})(vr||(vr={}));class me{constructor(e={}){this.version=vr.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new E,this.issuer=new re,this.validity=new yr,this.subject=new re,this.subjectPublicKeyInfo=new Qe,Object.assign(this,e)}}y([l({type:h.Integer,context:0,defaultValue:vr.v1})],me.prototype,"version",void 0);y([l({type:h.Integer,converter:W})],me.prototype,"serialNumber",void 0);y([l({type:E})],me.prototype,"signature",void 0);y([l({type:re})],me.prototype,"issuer",void 0);y([l({type:yr})],me.prototype,"validity",void 0);y([l({type:re})],me.prototype,"subject",void 0);y([l({type:Qe})],me.prototype,"subjectPublicKeyInfo",void 0);y([l({type:h.BitString,context:1,implicit:!0,optional:!0})],me.prototype,"issuerUniqueID",void 0);y([l({type:h.BitString,context:2,implicit:!0,optional:!0})],me.prototype,"subjectUniqueID",void 0);y([l({type:st,context:3,optional:!0})],me.prototype,"extensions",void 0);class Ft{constructor(e={}){this.tbsCertificate=new me,this.signatureAlgorithm=new E,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:me})],Ft.prototype,"tbsCertificate",void 0);y([l({type:E})],Ft.prototype,"signatureAlgorithm",void 0);y([l({type:h.BitString})],Ft.prototype,"signatureValue",void 0);class gr{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new ae,Object.assign(this,e)}}y([l({type:h.Integer,converter:W})],gr.prototype,"userCertificate",void 0);y([l({type:ae})],gr.prototype,"revocationDate",void 0);y([l({type:ge,optional:!0,repeated:"sequence"})],gr.prototype,"crlEntryExtensions",void 0);class ze{constructor(e={}){this.signature=new E,this.issuer=new re,this.thisUpdate=new ae,Object.assign(this,e)}}y([l({type:h.Integer,optional:!0})],ze.prototype,"version",void 0);y([l({type:E})],ze.prototype,"signature",void 0);y([l({type:re})],ze.prototype,"issuer",void 0);y([l({type:ae})],ze.prototype,"thisUpdate",void 0);y([l({type:ae,optional:!0})],ze.prototype,"nextUpdate",void 0);y([l({type:gr,repeated:"sequence",optional:!0})],ze.prototype,"revokedCertificates",void 0);y([l({type:ge,optional:!0,context:0,repeated:"sequence"})],ze.prototype,"crlExtensions",void 0);class ti{constructor(e={}){this.tbsCertList=new ze,this.signatureAlgorithm=new E,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}y([l({type:ze})],ti.prototype,"tbsCertList",void 0);y([l({type:E})],ti.prototype,"signatureAlgorithm",void 0);y([l({type:h.BitString})],ti.prototype,"signature",void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function G(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}const he="1.2.840.113549.1.1",mr=`${he}.1`,oc=`${he}.7`,sc=`${he}.9`,ac=`${he}.10`,lc=`${he}.2`,cc=`${he}.4`,ri=`${he}.5`,us=`${he}.11`,ni=`${he}.12`,ii=`${he}.13`,fs=`${he}.15`,hs=`${he}.16`,uc="1.3.14.3.2.26",fc="2.16.840.1.101.3.4.2.4",hc="2.16.840.1.101.3.4.2.1",pc="2.16.840.1.101.3.4.2.2",dc="2.16.840.1.101.3.4.2.3",yc="2.16.840.1.101.3.4.2.5",vc="2.16.840.1.101.3.4.2.6",gc="1.2.840.113549.2.2",mc="1.2.840.113549.2.5",oi=`${he}.8`;function Q(r){return new E({algorithm:r,parameters:null})}Q(gc);Q(mc);const at=Q(uc);Q(fc);Q(hc);Q(pc);Q(dc);Q(yc);Q(vc);const ps=new E({algorithm:oi,parameters:R.serialize(at)}),ds=new E({algorithm:sc,parameters:R.serialize(ir.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Q(mr);Q(lc);Q(cc);Q(ri);Q(fs);Q(hs);Q(ni);Q(ii);Q(fs);Q(hs);class br{constructor(e={}){this.hashAlgorithm=new E(at),this.maskGenAlgorithm=new E({algorithm:oi,parameters:R.serialize(at)}),this.pSourceAlgorithm=new E(ds),Object.assign(this,e)}}G([l({type:E,context:0,defaultValue:at})],br.prototype,"hashAlgorithm",void 0);G([l({type:E,context:1,defaultValue:ps})],br.prototype,"maskGenAlgorithm",void 0);G([l({type:E,context:2,defaultValue:ds})],br.prototype,"pSourceAlgorithm",void 0);new E({algorithm:oc,parameters:R.serialize(new br)});class zt{constructor(e={}){this.hashAlgorithm=new E(at),this.maskGenAlgorithm=new E({algorithm:oi,parameters:R.serialize(at)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}G([l({type:E,context:0,defaultValue:at})],zt.prototype,"hashAlgorithm",void 0);G([l({type:E,context:1,defaultValue:ps})],zt.prototype,"maskGenAlgorithm",void 0);G([l({type:h.Integer,context:2,defaultValue:20})],zt.prototype,"saltLength",void 0);G([l({type:h.Integer,context:3,defaultValue:1})],zt.prototype,"trailerField",void 0);new E({algorithm:ac,parameters:R.serialize(new zt)});class wr{constructor(e={}){this.digestAlgorithm=new E,this.digest=new Z,Object.assign(this,e)}}G([l({type:E})],wr.prototype,"digestAlgorithm",void 0);G([l({type:Z})],wr.prototype,"digest",void 0);var si;class Br{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}G([l({type:h.Integer,converter:W})],Br.prototype,"prime",void 0);G([l({type:h.Integer,converter:W})],Br.prototype,"exponent",void 0);G([l({type:h.Integer,converter:W})],Br.prototype,"coefficient",void 0);let ai=si=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,si.prototype)}};ai=si=G([C({type:A.Sequence,itemType:Br})],ai);class Pe{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}G([l({type:h.Integer})],Pe.prototype,"version",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"modulus",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"publicExponent",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"privateExponent",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"prime1",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"prime2",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"exponent1",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"exponent2",void 0);G([l({type:h.Integer,converter:W})],Pe.prototype,"coefficient",void 0);G([l({type:ai,optional:!0})],Pe.prototype,"otherPrimeInfos",void 0);class li{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}G([l({type:h.Integer,converter:W})],li.prototype,"modulus",void 0);G([l({type:h.Integer,converter:W})],li.prototype,"publicExponent",void 0);var ci;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(ci||(ci={}));var ce=ci;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ui=function(r,e){return ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},ui(r,e)};function fi(r,e){ui(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function kr(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function lt(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ar(arguments[e]));return r}var bc="injectionTokens";function wc(r){var e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(bc,r)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function ys(r){return!!r.useClass}function hi(r){return!!r.useFactory}var vs=function(){function r(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return r.prototype.createProxy=function(e){var t=this,n={},i=!1,o,s=function(){return i||(o=e(t.wrap()),i=!0),o};return new Proxy(n,this.createHandler(s))},r.prototype.createHandler=function(e){var t={},n=function(i){t[i]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=e();var a=Reflect[i];return a.apply(void 0,lt(o))}};return this.reflectMethods.forEach(n),t},r}();function xt(r){return typeof r=="string"||typeof r=="symbol"}function Bc(r){return typeof r=="object"&&"token"in r&&"multiple"in r}function gs(r){return typeof r=="object"&&"token"in r&&"transform"in r}function kc(r){return typeof r=="function"||r instanceof vs}function xr(r){return!!r.useToken}function Sr(r){return r.useValue!=null}function Ac(r){return ys(r)||Sr(r)||xr(r)||hi(r)}var pi=function(){function r(){this._registryMap=new Map}return r.prototype.entries=function(){return this._registryMap.entries()},r.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},r.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},r.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},r.prototype.setAll=function(e,t){this._registryMap.set(e,t)},r.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},r.prototype.clear=function(){this._registryMap.clear()},r.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},r}(),xc=function(r){fi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(pi),ms=function(){function r(){this.scopedResolutions=new Map}return r}();function Sc(r,e){if(r===null)return"at position #"+e;var t=r.split(",")[e].trim();return'"'+t+'" at position #'+e}function Cc(r,e,t){return t===void 0&&(t="    "),lt([r],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function Ic(r,e,t){var n=Ar(r.toString().match(/constructor\(([\w, ]+)\)/)||[],2),i=n[1],o=i===void 0?null:i,s=Sc(o,e);return Cc("Cannot inject the dependency "+s+' of "'+r.name+'" constructor. Reason:',t)}var Nc=function(r){fi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(pi),Oc=function(r){fi(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(pi),Ec=function(){function r(){this.preResolution=new Nc,this.postResolution=new Oc}return r}(),bs=new Map,Pc=function(){function r(e){this.parent=e,this._registry=new xc,this.interceptors=new Ec}return r.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:ce.Transient});var i;if(Ac(t)?i=t:i={useClass:t},xr(i))for(var o=[e],s=i;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+lt(o,[a]).join(" -> "));o.push(a);var c=this._registry.get(a);c&&xr(c.provider)?s=c.provider:s=null}if((n.lifecycle===ce.Singleton||n.lifecycle==ce.ContainerScoped||n.lifecycle==ce.ResolutionScoped)&&(Sr(i)||hi(i)))throw new Error('Cannot use lifecycle "'+ce[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:i,options:n}),this},r.prototype.registerType=function(e,t){return xt(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},r.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},r.prototype.registerSingleton=function(e,t){if(xt(e)){if(xt(t))return this.register(e,{useToken:t},{lifecycle:ce.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:ce.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!xt(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:ce.Singleton})},r.prototype.resolve=function(e,t){t===void 0&&(t=new ms);var n=this.getRegistration(e);if(!n&&xt(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var i=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}if(kc(e)){var i=this.construct(e,t);return this.executePostResolutionInterceptor(e,i,"Single"),i}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},r.prototype.executePreResolutionInterceptor=function(e,t){var n,i;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var s=kr(this.interceptors.preResolution.getAll(e)),a=s.next();!a.done;a=s.next()){var c=a.value;c.options.frequency!="Once"&&o.push(c),c.callback(e,t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},r.prototype.executePostResolutionInterceptor=function(e,t,n){var i,o;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var a=kr(this.interceptors.postResolution.getAll(e)),c=a.next();!c.done;c=a.next()){var u=c.value;u.options.frequency!="Once"&&s.push(u),u.callback(e,t,n)}}catch(w){i={error:w}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.interceptors.postResolution.setAll(e,s)}},r.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===ce.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===ce.Singleton,i=e.options.lifecycle===ce.ContainerScoped,o=n||i,s;return Sr(e.provider)?s=e.provider.useValue:xr(e.provider)?s=o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):ys(e.provider)?s=o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):hi(e.provider)?s=e.provider.useFactory(this):s=this.construct(e.provider,t),e.options.lifecycle===ce.ResolutionScoped&&t.scopedResolutions.set(e,s),s},r.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new ms);var i=this.getAllRegistrations(e);if(!i&&xt(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),i){var o=i.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,o,"All"),o}var s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s},r.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},r.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},r.prototype.clearInstances=function(){var e,t;try{for(var n=kr(this._registry.entries()),i=n.next();!i.done;i=n.next()){var o=Ar(i.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(c){return!Sr(c.provider)}).map(function(c){return c.instance=void 0,c}))}}catch(c){e={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.createChildContainer=function(){var e,t,n=new r(this);try{for(var i=kr(this._registry.entries()),o=i.next();!o.done;o=i.next()){var s=Ar(o.value,2),a=s[0],c=s[1];c.some(function(u){var w=u.options;return w.lifecycle===ce.ContainerScoped})&&n._registry.setAll(a,c.map(function(u){return u.options.lifecycle===ce.ContainerScoped?{provider:u.provider,options:u.options}:u}))}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},r.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},r.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},r.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},r.prototype.construct=function(e,t){var n=this;if(e instanceof vs)return e.createProxy(function(s){return n.resolve(s,t)});var i=bs.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=i.map(this.resolveParams(t,e));return new(e.bind.apply(e,lt([void 0],o)))},r.prototype.resolveParams=function(e,t){var n=this;return function(i,o){var s,a,c;try{return Bc(i)?gs(i)?i.multiple?(s=n.resolve(i.transform)).transform.apply(s,lt([n.resolveAll(i.token)],i.transformArgs)):(a=n.resolve(i.transform)).transform.apply(a,lt([n.resolve(i.token,e)],i.transformArgs)):i.multiple?n.resolveAll(i.token):n.resolve(i.token,e):gs(i)?(c=n.resolve(i.transform,e)).transform.apply(c,lt([n.resolve(i.token,e)],i.transformArgs)):n.resolve(i,e)}catch(u){throw new Error(Ic(t,o,u))}}},r}(),je=new Pc;function di(){return function(r){bs.set(r,wc(r))}}if(typeof Reflect=="undefined"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function z(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function U(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}class qt{constructor(e={}){this.attrType="",this.attrValues=[],Object.assign(this,e)}}U([l({type:h.ObjectIdentifier})],qt.prototype,"attrType",void 0);U([l({type:h.Any,repeated:"set"})],qt.prototype,"attrValues",void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function N(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}class yi{constructor(e={}){this.acIssuer=new $,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}N([l({type:$})],yi.prototype,"acIssuer",void 0);N([l({type:h.Integer})],yi.prototype,"acSerial",void 0);N([l({type:Fe,repeated:"sequence"})],yi.prototype,"attrs",void 0);var vi;let Cr=vi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,vi.prototype)}};Cr=vi=N([C({type:A.Sequence,itemType:h.ObjectIdentifier})],Cr);class Ir{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}N([l({type:h.Integer,optional:!0})],Ir.prototype,"pathLenConstraint",void 0);N([l({type:Cr,implicit:!0,context:0,optional:!0})],Ir.prototype,"permittedAttrs",void 0);N([l({type:Cr,implicit:!0,context:1,optional:!0})],Ir.prototype,"excludedAttrs",void 0);N([l({type:h.Boolean,defaultValue:!0})],Ir.prototype,"permitUnSpecified",void 0);class ct{constructor(e={}){this.issuer=new Ae,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}N([l({type:Ae})],ct.prototype,"issuer",void 0);N([l({type:h.Integer,converter:W})],ct.prototype,"serial",void 0);N([l({type:h.BitString,optional:!0})],ct.prototype,"issuerUID",void 0);var gi;(function(r){r[r.publicKey=0]="publicKey",r[r.publicKeyCert=1]="publicKeyCert",r[r.otherObjectTypes=2]="otherObjectTypes"})(gi||(gi={}));class ut{constructor(e={}){this.digestedObjectType=gi.publicKey,this.digestAlgorithm=new E,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}N([l({type:h.Enumerated})],ut.prototype,"digestedObjectType",void 0);N([l({type:h.ObjectIdentifier,optional:!0})],ut.prototype,"otherObjectTypeID",void 0);N([l({type:E})],ut.prototype,"digestAlgorithm",void 0);N([l({type:h.BitString})],ut.prototype,"objectDigest",void 0);class Nr{constructor(e={}){Object.assign(this,e)}}N([l({type:Ae,optional:!0})],Nr.prototype,"issuerName",void 0);N([l({type:ct,context:0,implicit:!0,optional:!0})],Nr.prototype,"baseCertificateID",void 0);N([l({type:ut,context:1,implicit:!0,optional:!0})],Nr.prototype,"objectDigestInfo",void 0);let St=class{constructor(e={}){Object.assign(this,e)}};N([l({type:$,repeated:"sequence"})],St.prototype,"v1Form",void 0);N([l({type:Nr,context:0,implicit:!0})],St.prototype,"v2Form",void 0);St=N([C({type:A.Choice})],St);class Or{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}N([l({type:h.GeneralizedTime})],Or.prototype,"notBeforeTime",void 0);N([l({type:h.GeneralizedTime})],Or.prototype,"notAfterTime",void 0);class Gt{constructor(e={}){Object.assign(this,e)}}N([l({type:ct,implicit:!0,context:0,optional:!0})],Gt.prototype,"baseCertificateID",void 0);N([l({type:Ae,implicit:!0,context:1,optional:!0})],Gt.prototype,"entityName",void 0);N([l({type:ut,implicit:!0,context:2,optional:!0})],Gt.prototype,"objectDigestInfo",void 0);var mi;(function(r){r[r.v2=1]="v2"})(mi||(mi={}));class Ce{constructor(e={}){this.version=mi.v2,this.holder=new Gt,this.issuer=new St,this.signature=new E,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new Or,this.attributes=[],Object.assign(this,e)}}N([l({type:h.Integer})],Ce.prototype,"version",void 0);N([l({type:Gt})],Ce.prototype,"holder",void 0);N([l({type:St})],Ce.prototype,"issuer",void 0);N([l({type:E})],Ce.prototype,"signature",void 0);N([l({type:h.Integer,converter:W})],Ce.prototype,"serialNumber",void 0);N([l({type:Or})],Ce.prototype,"attrCertValidityPeriod",void 0);N([l({type:Fe,repeated:"sequence"})],Ce.prototype,"attributes",void 0);N([l({type:h.BitString,optional:!0})],Ce.prototype,"issuerUniqueID",void 0);N([l({type:st,optional:!0})],Ce.prototype,"extensions",void 0);class Er{constructor(e={}){this.acinfo=new Ce,this.signatureAlgorithm=new E,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}N([l({type:Ce})],Er.prototype,"acinfo",void 0);N([l({type:E})],Er.prototype,"signatureAlgorithm",void 0);N([l({type:h.BitString})],Er.prototype,"signatureValue",void 0);var Pr;(function(r){r[r.unmarked=1]="unmarked",r[r.unclassified=2]="unclassified",r[r.restricted=4]="restricted",r[r.confidential=8]="confidential",r[r.secret=16]="secret",r[r.topSecret=32]="topSecret"})(Pr||(Pr={}));class bi extends or{}class wi{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}N([l({type:h.ObjectIdentifier,implicit:!0,context:0})],wi.prototype,"type",void 0);N([l({type:h.Any,implicit:!0,context:1})],wi.prototype,"value",void 0);class Bi{constructor(e={}){this.policyId="",this.classList=new bi(Pr.unclassified),Object.assign(this,e)}}N([l({type:h.ObjectIdentifier})],Bi.prototype,"policyId",void 0);N([l({type:bi,defaultValue:new bi(Pr.unclassified)})],Bi.prototype,"classList",void 0);N([l({type:wi,repeated:"set"})],Bi.prototype,"securityCategories",void 0);class jr{constructor(e={}){Object.assign(this,e)}}N([l({type:Z})],jr.prototype,"cotets",void 0);N([l({type:h.ObjectIdentifier})],jr.prototype,"oid",void 0);N([l({type:h.Utf8String})],jr.prototype,"string",void 0);class ws{constructor(e={}){this.values=[],Object.assign(this,e)}}N([l({type:Ae,implicit:!0,context:0,optional:!0})],ws.prototype,"policyAuthority",void 0);N([l({type:jr,repeated:"sequence"})],ws.prototype,"values",void 0);var ki;class Rr{constructor(e={}){this.targetCertificate=new ct,Object.assign(this,e)}}N([l({type:ct})],Rr.prototype,"targetCertificate",void 0);N([l({type:$,optional:!0})],Rr.prototype,"targetName",void 0);N([l({type:ut,optional:!0})],Rr.prototype,"certDigestInfo",void 0);let Ct=class{constructor(e={}){Object.assign(this,e)}};N([l({type:$,context:0,implicit:!0})],Ct.prototype,"targetName",void 0);N([l({type:$,context:1,implicit:!0})],Ct.prototype,"targetGroup",void 0);N([l({type:Rr,context:2,implicit:!0})],Ct.prototype,"targetCert",void 0);Ct=N([C({type:A.Choice})],Ct);let Ai=ki=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,ki.prototype)}};Ai=ki=N([C({type:A.Sequence,itemType:Ct})],Ai);var xi;let Bs=xi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,xi.prototype)}};Bs=xi=N([C({type:A.Sequence,itemType:Ai})],Bs);class ks{constructor(e={}){Object.assign(this,e)}}N([l({type:Ae,implicit:!0,context:0,optional:!0})],ks.prototype,"roleAuthority",void 0);N([l({type:$,implicit:!0,context:1})],ks.prototype,"roleName",void 0);class Si{constructor(e={}){this.service=new $,this.ident=new $,Object.assign(this,e)}}N([l({type:$})],Si.prototype,"service",void 0);N([l({type:$})],Si.prototype,"ident",void 0);N([l({type:Z,optional:!0})],Si.prototype,"authInfo",void 0);var Ci;class Ii{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}U([l({type:h.ObjectIdentifier})],Ii.prototype,"otherCertFormat",void 0);U([l({type:h.Any})],Ii.prototype,"otherCert",void 0);let It=class{constructor(e={}){Object.assign(this,e)}};U([l({type:Ft})],It.prototype,"certificate",void 0);U([l({type:Er,context:2,implicit:!0})],It.prototype,"v2AttrCert",void 0);U([l({type:Ii,context:3,implicit:!0})],It.prototype,"other",void 0);It=U([C({type:A.Choice})],It);let Ni=Ci=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Ci.prototype)}};Ni=Ci=U([C({type:A.Set,itemType:It})],Ni);class Nt{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}U([l({type:h.ObjectIdentifier})],Nt.prototype,"contentType",void 0);U([l({type:h.Any,context:0})],Nt.prototype,"content",void 0);let Wt=class{constructor(e={}){Object.assign(this,e)}};U([l({type:Z})],Wt.prototype,"single",void 0);U([l({type:h.Any})],Wt.prototype,"any",void 0);Wt=U([C({type:A.Choice})],Wt);class Tr{constructor(e={}){this.eContentType="",Object.assign(this,e)}}U([l({type:h.ObjectIdentifier})],Tr.prototype,"eContentType",void 0);U([l({type:Wt,context:0,optional:!0})],Tr.prototype,"eContent",void 0);class Oi{constructor(e={}){this.issuer=new re,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}U([l({type:re})],Oi.prototype,"issuer",void 0);U([l({type:h.Integer,converter:W})],Oi.prototype,"serialNumber",void 0);var Ei;class Hr{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}U([l({type:h.ObjectIdentifier})],Hr.prototype,"otherRevInfoFormat",void 0);U([l({type:h.Any})],Hr.prototype,"otherRevInfo",void 0);let Jt=class{constructor(e={}){this.other=new Hr,Object.assign(this,e)}};U([l({type:Hr,context:1,implicit:!0})],Jt.prototype,"other",void 0);Jt=U([C({type:A.Choice})],Jt);let As=Ei=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Ei.prototype)}};As=Ei=U([C({type:A.Set,itemType:Jt})],As);var Ur;(function(r){r[r.v0=0]="v0",r[r.v1=1]="v1",r[r.v2=2]="v2",r[r.v3=3]="v3",r[r.v4=4]="v4",r[r.v5=5]="v5"})(Ur||(Ur={}));let Kt=class extends E{};Kt=U([C({type:A.Sequence})],Kt);let Lr=class extends E{};Lr=U([C({type:A.Sequence})],Lr);let Ot=class{constructor(e={}){Object.assign(this,e)}};U([l({type:Qn,context:0,implicit:!0})],Ot.prototype,"subjectKeyIdentifier",void 0);U([l({type:Oi})],Ot.prototype,"issuerAndSerialNumber",void 0);Ot=U([C({type:A.Choice})],Ot);var Pi;class qe{constructor(e={}){this.version=Ur.v0,this.sid=new Ot,this.digestAlgorithm=new Kt,this.signatureAlgorithm=new Lr,this.signature=new Z,Object.assign(this,e)}}U([l({type:h.Integer})],qe.prototype,"version",void 0);U([l({type:Ot})],qe.prototype,"sid",void 0);U([l({type:Kt})],qe.prototype,"digestAlgorithm",void 0);U([l({type:qt,repeated:"set",context:0,implicit:!0,optional:!0})],qe.prototype,"signedAttrs",void 0);U([l({type:Lr})],qe.prototype,"signatureAlgorithm",void 0);U([l({type:Z})],qe.prototype,"signature",void 0);U([l({type:qt,repeated:"set",context:1,implicit:!0,optional:!0})],qe.prototype,"unsignedAttrs",void 0);let _r=Pi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Pi.prototype)}};_r=Pi=U([C({type:A.Set,itemType:qe})],_r);var ji;let Dr=ji=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,ji.prototype)}};Dr=ji=U([C({type:A.Set,itemType:Kt})],Dr);class Et{constructor(e={}){this.version=Ur.v0,this.digestAlgorithms=new Dr,this.encapContentInfo=new Tr,this.signerInfos=new _r,Object.assign(this,e)}}U([l({type:h.Integer})],Et.prototype,"version",void 0);U([l({type:Dr})],Et.prototype,"digestAlgorithms",void 0);U([l({type:Tr})],Et.prototype,"encapContentInfo",void 0);U([l({type:Ni,context:0,implicit:!0,optional:!0})],Et.prototype,"certificates",void 0);U([l({type:Jt,context:1,implicit:!0,optional:!0})],Et.prototype,"crls",void 0);U([l({type:_r})],Et.prototype,"signerInfos",void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function K(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}var Ri;class $r{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}K([l({type:h.ObjectIdentifier})],$r.prototype,"attrId",void 0);K([l({type:h.Any,repeated:"set"})],$r.prototype,"attrValues",void 0);let xs=Ri=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Ri.prototype)}};xs=Ri=K([C({type:A.Sequence,itemType:$r})],xs);var Ti;let Ss=Ti=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Ti.prototype)}};Ss=Ti=K([C({type:A.Sequence,itemType:Nt})],Ss);class Cs{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}K([l({type:h.ObjectIdentifier})],Cs.prototype,"certId",void 0);K([l({type:h.Any,context:0})],Cs.prototype,"certValue",void 0);class Is{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}K([l({type:h.ObjectIdentifier})],Is.prototype,"crlId",void 0);K([l({type:h.Any,context:0})],Is.prototype,"crltValue",void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ft(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}class Ns extends Z{}class Vr{constructor(e={}){this.encryptionAlgorithm=new E,this.encryptedData=new Ns,Object.assign(this,e)}}ft([l({type:E})],Vr.prototype,"encryptionAlgorithm",void 0);ft([l({type:Ns})],Vr.prototype,"encryptedData",void 0);var Hi,Ui;(function(r){r[r.v1=0]="v1"})(Ui||(Ui={}));class Os extends Z{}let Li=Hi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Hi.prototype)}};Li=Hi=ft([C({type:A.Sequence,itemType:Fe})],Li);class Zt{constructor(e={}){this.version=Ui.v1,this.privateKeyAlgorithm=new E,this.privateKey=new Os,Object.assign(this,e)}}ft([l({type:h.Integer})],Zt.prototype,"version",void 0);ft([l({type:E})],Zt.prototype,"privateKeyAlgorithm",void 0);ft([l({type:Os})],Zt.prototype,"privateKey",void 0);ft([l({type:Li,implicit:!0,context:0,optional:!0})],Zt.prototype,"attributes",void 0);let Es=class extends Zt{};Es=K([C({type:A.Sequence})],Es);let Ps=class extends Vr{};Ps=K([C({type:A.Sequence})],Ps);class js{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}K([l({type:h.ObjectIdentifier})],js.prototype,"secretTypeId",void 0);K([l({type:h.Any,context:0})],js.prototype,"secretValue",void 0);class Yt{constructor(e={}){this.mac=new wr,this.macSalt=new Z,this.iterations=1,Object.assign(this,e)}}K([l({type:wr})],Yt.prototype,"mac",void 0);K([l({type:Z})],Yt.prototype,"macSalt",void 0);K([l({type:h.Integer,defaultValue:1})],Yt.prototype,"iterations",void 0);class Mr{constructor(e={}){this.version=3,this.authSafe=new Nt,this.macData=new Yt,Object.assign(this,e)}}K([l({type:h.Integer})],Mr.prototype,"version",void 0);K([l({type:Nt})],Mr.prototype,"authSafe",void 0);K([l({type:Yt,optional:!0})],Mr.prototype,"macData",void 0);var _i;class Fr{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}K([l({type:h.ObjectIdentifier})],Fr.prototype,"bagId",void 0);K([l({type:h.Any,context:0})],Fr.prototype,"bagValue",void 0);K([l({type:$r,repeated:"set",optional:!0})],Fr.prototype,"bagAttributes",void 0);let Rs=_i=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,_i.prototype)}};Rs=_i=K([C({type:A.Sequence,itemType:Fr})],Rs);var Di,$i,Vi;const Ts="1.2.840.113549.1.9",Hs=`${Ts}.7`,Us=`${Ts}.14`;let zr=class extends oe{constructor(e={}){super(e)}toString(){return this.ia5String||super.toString()}};z([l({type:h.IA5String})],zr.prototype,"ia5String",void 0);zr=z([C({type:A.Choice})],zr);let Ls=class extends Nt{};Ls=z([C({type:A.Sequence})],Ls);let _s=class extends Mr{};_s=z([C({type:A.Sequence})],_s);let Ds=class extends Vr{};Ds=z([C({type:A.Sequence})],Ds);let Mi=class{constructor(e=""){this.value=e}toString(){return this.value}};z([l({type:h.IA5String})],Mi.prototype,"value",void 0);Mi=z([C({type:A.Choice})],Mi);let $s=class extends zr{};$s=z([C({type:A.Choice})],$s);let Vs=class extends oe{};Vs=z([C({type:A.Choice})],Vs);let Fi=class{constructor(e=new Date){this.value=e}};z([l({type:h.GeneralizedTime})],Fi.prototype,"value",void 0);Fi=z([C({type:A.Choice})],Fi);let Ms=class extends oe{};Ms=z([C({type:A.Choice})],Ms);let zi=class{constructor(e="M"){this.value=e}toString(){return this.value}};z([l({type:h.PrintableString})],zi.prototype,"value",void 0);zi=z([C({type:A.Choice})],zi);let qr=class{constructor(e=""){this.value=e}toString(){return this.value}};z([l({type:h.PrintableString})],qr.prototype,"value",void 0);qr=z([C({type:A.Choice})],qr);let Fs=class extends qr{};Fs=z([C({type:A.Choice})],Fs);let zs=class extends oe{};zs=z([C({type:A.Choice})],zs);let qi=class{constructor(e=""){this.value=e}toString(){return this.value}};z([l({type:h.ObjectIdentifier})],qi.prototype,"value",void 0);qi=z([C({type:A.Choice})],qi);let qs=class extends ae{};qs=z([C({type:A.Choice})],qs);let Gi=class{constructor(e=0){this.value=e}toString(){return this.value.toString()}};z([l({type:h.Integer})],Gi.prototype,"value",void 0);Gi=z([C({type:A.Choice})],Gi);let Gs=class extends qe{};Gs=z([C({type:A.Sequence})],Gs);let Gr=class extends oe{};Gr=z([C({type:A.Choice})],Gr);let Ws=Di=class extends st{constructor(e){super(e);Object.setPrototypeOf(this,Di.prototype)}};Ws=Di=z([C({type:A.Sequence})],Ws);let Js=$i=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,$i.prototype)}};Js=$i=z([C({type:A.Set,itemType:qt})],Js);let Wi=class{constructor(e=""){this.value=e}toString(){return this.value}};z([l({type:h.BmpString})],Wi.prototype,"value",void 0);Wi=z([C({type:A.Choice})],Wi);let Ji=class extends E{};Ji=z([C({type:A.Sequence})],Ji);let Ks=Vi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Vi.prototype)}};Ks=Vi=z([C({type:A.Sequence,itemType:Ji})],Ks);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ki(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}const Zs="1.2.840.10045.2.1",Ys="1.2.840.10045.4.1",jc="1.2.840.10045.4.3.1",Xs="1.2.840.10045.4.3.2",Qs="1.2.840.10045.4.3.3",ea="1.2.840.10045.4.3.4",ta="1.2.840.10045.3.1.7",ra="1.3.132.0.34",na="1.3.132.0.35";function Xt(r){return new E({algorithm:r})}const Rc=Xt(Ys);Xt(jc);const Tc=Xt(Xs),Hc=Xt(Qs),Uc=Xt(ea);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function et(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}let Pt=class{constructor(e={}){Object.assign(this,e)}};et([l({type:h.ObjectIdentifier})],Pt.prototype,"namedCurve",void 0);Pt=et([C({type:A.Choice})],Pt);class Wr{constructor(e={}){this.version=1,this.privateKey=new Z,Object.assign(this,e)}}et([l({type:h.Integer})],Wr.prototype,"version",void 0);et([l({type:Z})],Wr.prototype,"privateKey",void 0);et([l({type:Pt,context:0,optional:!0})],Wr.prototype,"parameters",void 0);et([l({type:h.BitString,context:1,optional:!0})],Wr.prototype,"publicKey",void 0);class Jr{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}et([l({type:h.Integer,converter:W})],Jr.prototype,"r",void 0);et([l({type:h.Integer,converter:W})],Jr.prototype,"s",void 0);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function tt(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}var Zi;let Kr=Zi=class extends q{constructor(e){super(e);Object.setPrototypeOf(this,Zi.prototype)}};Kr=Zi=tt([C({type:A.Sequence,itemType:Fe})],Kr);class jt{constructor(e={}){this.version=0,this.subject=new re,this.subjectPKInfo=new Qe,this.attributes=new Kr,Object.assign(this,e)}}tt([l({type:h.Integer})],jt.prototype,"version",void 0);tt([l({type:re})],jt.prototype,"subject",void 0);tt([l({type:Qe})],jt.prototype,"subjectPKInfo",void 0);tt([l({type:Kr,implicit:!0,context:0})],jt.prototype,"attributes",void 0);class Yi{constructor(e={}){this.certificationRequestInfo=new jt,this.signatureAlgorithm=new E,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}tt([l({type:jt})],Yi.prototype,"certificationRequestInfo",void 0);tt([l({type:E})],Yi.prototype,"signatureAlgorithm",void 0);tt([l({type:h.BitString})],Yi.prototype,"signature",void 0);/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */class Rt{constructor(...e){if(e.length===1){const t=e[0];this.rawData=R.serialize(t),this.onInit(t)}else{const t=R.parse(e[0],e[1]);this.rawData=H.toArrayBuffer(e[0]),this.onInit(t)}}equal(e){return e instanceof Rt?ec(e.rawData,this.rawData):!1}}class rt extends Rt{constructor(...e){let t;H.isBufferSource(e[0])?t=H.toArrayBuffer(e[0]):t=R.serialize(new ge({extnID:e[0],critical:e[1],extnValue:new Z(H.toArrayBuffer(e[2]))}));super(t,ge)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}}class ht extends Map{constructor(){super();typeof self!="undefined"&&typeof crypto!="undefined"&&this.set(ht.DEFAULT,crypto)}static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}get(e=ht.DEFAULT){const t=super.get(e.toLowerCase());if(!t)throw new Error(`Cannot get Crypto by name '${e}'`);return t}set(e,t){if(typeof e=="string"){if(!t)throw new TypeError("Argument 'value' is required");super.set(e.toLowerCase(),t)}else super.set(ht.DEFAULT,e);return this}}ht.DEFAULT="default";const Ie=new ht,Zr="crypto.algorithm";class Lc{getAlgorithms(){return je.resolveAll(Zr)}toAsnAlgorithm(e){we({},e);for(const t of this.getAlgorithms()){const n=t.toAsnAlgorithm(e);if(n)return n}if(/[0-9.]+/.test(e.name)){const t=new E({algorithm:e.name});if("parameters"in e){const n=e;t.parameters=n.parameters}return t}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const n of this.getAlgorithms()){const i=n.toWebAlgorithm(e);if(i)return i}return{name:e.algorithm,parameters:e.parameters}}}const Xi="crypto.algorithmProvider";je.registerSingleton(Xi,Lc);class Qi{constructor(){this.CertificateTag="CERTIFICATE",this.CertificateRequestTag="CERTIFICATE REQUEST",this.PublicKeyTag="PUBLIC KEY",this.PrivateKeyTag="PRIVATE KEY"}static isPem(e){return typeof e=="string"&&/-{5}BEGIN [A-Z0-9 ]+-{5}([a-zA-Z0-9=+/\n\r]+)-{5}END [A-Z0-9 ]+-{5}/g.test(e)}static decode(e){const t=/-{5}BEGIN [A-Z0-9 ]+-{5}([a-zA-Z0-9=+/\n\r]+)-{5}END [A-Z0-9 ]+-{5}/g,n=[];let i=null;for(;i=t.exec(e);){const o=i[1].replace(/\r/g,"").replace(/\n/g,"");n.push(T.FromBase64(o))}return n}static encode(e,t){if(Array.isArray(e)){const n=new Array;return e.forEach(i=>{n.push(this.encodeBuffer(i,t))}),n.join(`
`)}else return this.encodeBuffer(e,t)}static encodeBuffer(e,t){const n=T.ToBase64(e);let i,o=0;const s=Array();for(;o<n.length&&(n.length-o<64?i=n.substring(o):(i=n.substring(o,o+64),o+=64),i.length!==0);)if(s.push(i),i.length<64)break;const a=t.toLocaleUpperCase();return`-----BEGIN ${a}-----
${s.join(`
`)}
-----END ${a}-----`}}class pt extends Rt{static isAsnEncoded(e){return H.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(Qi.isPem(e))return Qi.decode(e)[0];if(T.isHex(e))return T.FromHex(e);if(T.isBase64(e))return T.FromBase64(e);if(T.isBase64Url(e))return T.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else return e}constructor(...e){pt.isAsnEncoded(e[0])?super(pt.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){switch(e){case"pem":return Qi.encode(this.rawData,this.tag);case"hex":return T.ToHex(this.rawData);case"base64":return T.ToBase64(this.rawData);case"base64url":return T.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}}class Yr extends pt{constructor(e){pt.isAsnEncoded(e)?super(e,Qe):super(e),this.tag="PUBLIC KEY"}async export(...e){let t,n=["verify"],i=we({hash:"SHA-256"},this.algorithm);return e.length>1?(i=e[0]||i,n=e[1]||n,t=e[2]||Ie.get()):t=e[0]||Ie.get(),t.subtle.importKey("spki",this.rawData,i,!0,n)}onInit(e){const t=je.resolve(Xi),n=this.algorithm=t.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case mr:{const i=R.parse(e.subjectPublicKey,li),o=H.toUint8Array(i.modulus);n.publicExponent=H.toUint8Array(i.publicExponent),n.modulusLength=(o[0]?o:o.slice(1)).byteLength<<3;break}}}async getThumbprint(...e){var t;let n,i="SHA-1";return e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)?(i=e[0]||i,n=e[1]||Ie.get()):n=e[0]||Ie.get(),await n.subtle.digest(i,this.rawData)}async getKeyIdentifier(e){e||(e=Ie.get());const t=R.parse(this.rawData,Qe);return await e.subtle.digest("SHA-1",t.subjectPublicKey)}}class ia{constructor(){this.items={}}get(e){return this.items[e]||null}register(e,t){this.items[e]=t,this.items[t]=e}}const pe=new ia;pe.register("CN","2.5.4.3");pe.register("L","2.5.4.7");pe.register("ST","2.5.4.8");pe.register("O","2.5.4.10");pe.register("OU","2.5.4.11");pe.register("C","2.5.4.6");pe.register("DC","0.9.2342.19200300.100.1.25");pe.register("E","1.2.840.113549.1.9.1");pe.register("G","2.5.4.42");pe.register("I","2.5.4.43");pe.register("SN","2.5.4.4");pe.register("T","2.5.4.12");function _c(r,e){return`\\${T.ToHex(T.FromUtf8String(e)).toUpperCase()}`}function Dc(r){return r.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,_c)}class Qt{constructor(e,t={}){this.extraNames=new ia,this.asn=new re;for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];this.extraNames.register(n,i)}typeof e=="string"?this.asn=this.fromString(e):e instanceof re?this.asn=e:H.isBufferSource(e)?this.asn=R.parse(e,re):this.asn=this.fromJSON(e)}static isASCII(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!1;return!0}getName(e){return this.extraNames.get(e)||pe.get(e)}toString(){return this.asn.map(e=>e.map(t=>{const n=this.getName(t.type)||t.type,i=t.value.anyValue?`#${T.ToHex(t.value.anyValue)}`:Dc(t.value.toString());return`${n}=${i}`}).join("+")).join(", ")}toJSON(){var e;const t=[];for(const n of this.asn){const i={};for(const o of n){const s=this.getName(o.type)||o.type;(e=i[s])!==null&&e!==void 0||(i[s]=[]),i[s].push(o.value.anyValue?`#${T.ToHex(o.value.anyValue)}`:o.value.toString())}t.push(i)}return t}fromString(e){const t=new re,n=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let i=null,o=",";for(;i=n.exec(`${e},`);){let[,s,a]=i;const c=a[a.length-1];(c===","||c==="+")&&(a=a.slice(0,a.length-1),i[3]=c);const u=i[3];if(/[\d.]+/.test(s)||(s=this.getName(s)||""),!s)throw new Error(`Cannot get OID for name type '${s}'`);const w=new Dt({type:s});if(a.charAt(0)==="#")w.value.anyValue=T.FromHex(a.slice(1));else{const m=/"(.*?[^\\])?"/.exec(a);m&&(a=m[1]),a=a.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1"),s===this.getName("E")||s===this.getName("DC")?w.value.ia5String=a:Qt.isASCII(a)?w.value.printableString=a:w.value.utf8String=a}o==="+"?t[t.length-1].push(w):t.push(new Bt([w])),o=u}return t}fromJSON(e){const t=new re;for(const n of e){const i=new Bt;for(const o in n){let s=o;if(/[\d.]+/.test(o)||(s=this.getName(o)||""),!s)throw new Error(`Cannot get OID for name type '${o}'`);const a=n[o];for(const c of a){const u=new Dt({type:s});c[0]==="#"?u.value.anyValue=T.FromHex(c.slice(1)):s===this.getName("E")||s===this.getName("DC")?u.value.ia5String=c:u.value.printableString=c,i.push(u)}}t.push(i)}return t}toArrayBuffer(){return R.serialize(this.asn)}async getThumbprint(...e){var t;let n,i="SHA-1";return e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)?(i=e[0]||i,n=e[1]||Ie.get()):n=e[0]||Ie.get(),await n.subtle.digest(i,this.toArrayBuffer())}}class Re{static register(e,t){this.items.set(e,t)}static create(e){const t=new rt(e),n=this.items.get(t.type);return n?new n(e):t}}Re.items=new Map;const eo="crypto.signatureFormatter";class $c{toAsnSignature(e,t){return H.toArrayBuffer(t)}toWebSignature(e,t){return H.toArrayBuffer(t)}}class Xr extends pt{constructor(e){pt.isAsnEncoded(e)?super(e,Ft):super(e),this.tag="CERTIFICATE"}onInit(e){const t=e.tbsCertificate;this.tbs=R.serialize(t),this.serialNumber=T.ToHex(t.serialNumber),this.subjectName=new Qt(t.subject),this.subject=new Qt(t.subject).toString(),this.issuerName=new Qt(t.issuer),this.issuer=this.issuerName.toString();const n=je.resolve(Xi);this.signatureAlgorithm=n.toWebAlgorithm(e.signatureAlgorithm),this.signature=e.signatureValue;const i=t.validity.notBefore.utcTime||t.validity.notBefore.generalTime;if(!i)throw new Error("Cannot get 'notBefore' value");this.notBefore=i;const o=t.validity.notAfter.utcTime||t.validity.notAfter.generalTime;if(!o)throw new Error("Cannot get 'notAfter' value");this.notAfter=o,this.extensions=[],t.extensions&&(this.extensions=t.extensions.map(s=>Re.create(R.serialize(s)))),this.publicKey=new Yr(t.subjectPublicKeyInfo)}getExtension(e){for(const t of this.extensions)if(typeof e=="string"){if(t.type===e)return t}else if(t instanceof e)return t;return null}getExtensions(e){return this.extensions.filter(t=>typeof e=="string"?t.type===e:t instanceof e)}async verify(e={},t=Ie.get()){let n,i;const o=e.publicKey;try{o?o instanceof Xr?(n=we(we({},o.publicKey.algorithm),this.signatureAlgorithm),i=await o.publicKey.export(n,["verify"])):o instanceof Yr?(n=we(we({},o.algorithm),this.signatureAlgorithm),i=await o.export(n,["verify"])):(n=we(we({},o.algorithm),this.signatureAlgorithm),i=o):(n=we(we({},this.publicKey.algorithm),this.signatureAlgorithm),i=await this.publicKey.export(n,["verify"],t))}catch{return!1}const s=je.resolveAll(eo).reverse();let a=null;for(const u of s)if(a=u.toWebSignature(n,this.signature),a)break;if(!a)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const c=await t.subtle.verify(this.signatureAlgorithm,i,a,this.tbs);if(e.signatureOnly)return c;{const w=(e.date||new Date).getTime();return c&&this.notBefore.getTime()<w&&w<this.notAfter.getTime()}}async getThumbprint(...e){let t,n="SHA-1";return e[0]&&(e[0].subtle?t=e[0]:(n=e[0]||n,t=e[1])),t!=null||(t=Ie.get()),await t.subtle.digest(n,this.rawData)}async isSelfSigned(){return this.subject===this.issuer&&await this.verify({signatureOnly:!0})}}class Qr extends rt{constructor(...e){if(H.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const t=new kt({keyIdentifier:new Z(T.FromHex(e[0]))});super(Hn,e[1],R.serialize(t))}else{const t=e[0],n=new kt({authorityCertIssuer:t.name,authorityCertSerialNumber:T.FromHex(t.serialNumber)});super(Hn,e[1],R.serialize(n))}}static async create(e,t=!1,n=Ie.get()){if(e instanceof Xr||ht.isCryptoKey(e)){const i=e instanceof Xr?await e.publicKey.export(n):e,o=await n.subtle.exportKey("spki",i),a=await new Yr(o).getKeyIdentifier(n);return new Qr(T.ToHex(a),t)}else return new Qr(e,t)}onInit(e){super.onInit(e);const t=R.parse(e.extnValue,kt);t.keyIdentifier&&(this.keyId=T.ToHex(t.keyIdentifier)),t.authorityCertIssuer&&t.authorityCertSerialNumber&&(this.certId={name:t.authorityCertIssuer,serialNumber:T.ToHex(t.authorityCertSerialNumber)})}}class Vc extends rt{constructor(...e){if(H.isBufferSource(e[0])){super(e[0]);const t=R.parse(this.value,sr);this.ca=t.cA,this.pathLength=t.pathLenConstraint}else{const t=new sr({cA:e[0],pathLenConstraint:e[1]});super(qo,e[2],R.serialize(t));this.ca=e[0],this.pathLength=e[1]}}}class Mc extends rt{constructor(...e){if(H.isBufferSource(e[0])){super(e[0]);const t=R.parse(this.value,fr);this.usages=t.map(n=>n)}else{const t=new fr(e[0]);super(Yo,e[1],R.serialize(t));this.usages=e[0]}}}var oa;(function(r){r[r.digitalSignature=1]="digitalSignature",r[r.nonRepudiation=2]="nonRepudiation",r[r.keyEncipherment=4]="keyEncipherment",r[r.dataEncipherment=8]="dataEncipherment",r[r.keyAgreement=16]="keyAgreement",r[r.keyCertSign=32]="keyCertSign",r[r.cRLSign=64]="cRLSign",r[r.encipherOnly=128]="encipherOnly",r[r.decipherOnly=256]="decipherOnly"})(oa||(oa={}));class Fc extends rt{constructor(...e){if(H.isBufferSource(e[0])){super(e[0]);const t=R.parse(this.value,es);this.usages=t.toNumber()}else{const t=new es(e[0]);super(Qo,e[1],R.serialize(t));this.usages=e[0]}}}class to extends rt{constructor(...e){if(H.isBufferSource(e[0])){super(e[0]);const t=R.parse(this.value,Qn);this.keyId=T.ToHex(t)}else{const t=typeof e[0]=="string"?T.FromHex(e[0]):e[0],n=new Qn(t);super(ss,e[1],R.serialize(n));this.keyId=T.ToHex(t)}}static async create(e,t=!1,n=Ie.get()){const i=await n.subtle.exportKey("spki",e),s=await new Yr(i).getKeyIdentifier(n);return new to(T.ToHex(s),t)}}class zc extends Rt{constructor(...e){let t;if(H.isBufferSource(e[0]))t=H.toArrayBuffer(e[0]);else{const n=e[0],i=H.toArrayBuffer(e[1]);t=R.serialize(new Xe({typeId:n,value:i}))}super(t,Xe)}onInit(e){this.type=e.typeId,this.value=e.value}toJSON(){return{type:this.type,value:T.ToHex(this.value)}}}class Te extends rt{constructor(...e){if(H.isBufferSource(e[0]))super(e[0]);else{const t=e[0]||{},n=new dr;for(const i of t.dns||[])n.push(new $({dNSName:i}));for(const i of t.email||[])n.push(new $({rfc822Name:i}));for(const i of t.guid||[]){const o=/([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})/i.exec(i);if(!o)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const s=o.slice(1).map((a,c)=>c<3?T.ToHex(new Uint8Array(T.FromHex(a)).reverse()):a).join("");n.push(new $({otherName:new Xe({typeId:Te.GUID,value:R.serialize(new Z(T.FromHex(s)))})}))}for(const i of t.ip||[])n.push(new $({iPAddress:i}));for(const i of t.url||[])n.push(new $({uniformResourceIdentifier:i}));for(const i of t.upn||[])n.push(new $({otherName:new Xe({typeId:Te.UPN,value:R.serialize(_o.toASN(i))})}));for(const i of t.registeredId||[])n.push(new $({registeredID:i}));for(const i of t.otherName||[])n.push(new $({otherName:new Xe({typeId:i.type,value:T.FromHex(i.value)})}));super(is,e[1],R.serialize(n))}}onInit(e){super.onInit(e);const t=R.parse(e.extnValue,dr);this.dns=t.filter(n=>n.dNSName).map(n=>n.dNSName||""),this.email=t.filter(n=>n.rfc822Name).map(n=>n.rfc822Name||""),this.ip=t.filter(n=>n.iPAddress).map(n=>n.iPAddress||""),this.url=t.filter(n=>n.uniformResourceIdentifier).map(n=>n.uniformResourceIdentifier||""),this.upn=t.filter(n=>{var i;return((i=n.otherName)===null||i===void 0?void 0:i.typeId)===Te.UPN}).map(n=>n.otherName?R.parse(n.otherName.value,oe).toString():""),this.guid=t.filter(n=>{var i;return((i=n.otherName)===null||i===void 0?void 0:i.typeId)===Te.GUID}).map(n=>n.otherName?R.parse(n.otherName.value,Z):new Z).map(n=>{const i=/([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})/i.exec(T.ToHex(n));if(!i)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");return`{${i.slice(1).map((s,a)=>a<3?T.ToHex(new Uint8Array(T.FromHex(s)).reverse()):s).join("-")}}`}),this.registeredId=t.filter(n=>n.registeredID).map(n=>n.registeredID||""),this.otherNames=t.filter(n=>n.otherName&&![Te.GUID,Te.UPN].includes(n.otherName.typeId)).map(n=>new zc(n.otherName.typeId,n.otherName.value))}toJSON(){const e={};return this.dns.length&&(e.dns=[...this.dns]),this.email.length&&(e.email=[...this.email]),this.ip.length&&(e.ip=[...this.ip]),this.guid.length&&(e.guid=[...this.guid]),this.upn.length&&(e.upn=[...this.upn]),this.url.length&&(e.url=[...this.url]),this.registeredId.length&&(e.registeredId=[...this.registeredId]),this.otherNames.length&&(e.otherName=this.otherNames.map(t=>t.toJSON())),e}}Te.GUID="1.3.6.1.4.1.311.25.1";Te.UPN="1.3.6.1.4.1.311.20.2.3";class qc extends rt{constructor(...e){var t;if(H.isBufferSource(e[0])){super(e[0]);const n=R.parse(this.value,cr);this.policies=n.map(i=>i.policyIdentifier)}else{const n=e[0],i=(t=e[1])!==null&&t!==void 0?t:!1,o=new cr(n.map(s=>new lr({policyIdentifier:s})));super(Wo,i,R.serialize(o));this.policies=n}}}Re.register(Wo,qc);class ro extends Rt{constructor(...e){let t;if(H.isBufferSource(e[0]))t=H.toArrayBuffer(e[0]);else{const n=e[0],i=Array.isArray(e[1])?e[1].map(o=>H.toArrayBuffer(o)):[];t=R.serialize(new Fe({type:n,values:i}))}super(t,Fe)}onInit(e){this.type=e.type,this.values=e.values}}class Gc extends ro{constructor(...e){var t;if(H.isBufferSource(e[0]))super(e[0]);else{const n=new Gr({printableString:e[0]});super(Hs,[R.serialize(n)])}(t=this.password)!==null&&t!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const t=R.parse(this.values[0],Gr);this.password=t.toString()}}}class Wc extends ro{constructor(...e){var t;if(H.isBufferSource(e[0]))super(e[0]);else{const n=new st(e[0]);super(Us,[R.serialize(n)])}(t=this.items)!==null&&t!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const t=R.parse(this.values[0],st);this.items=t.map(n=>Re.create(R.serialize(n)))}}}class no{static register(e,t){this.items.set(e,t)}static create(e){const t=new ro(e),n=this.items.get(t.type);return n?new n(e):t}}no.items=new Map;let io=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(e.hash)switch(e.hash.name.toLowerCase()){case"sha-1":return new E({algorithm:ri,parameters:null});case"sha-256":return new E({algorithm:us,parameters:null});case"sha-384":return new E({algorithm:ni,parameters:null});case"sha-512":return new E({algorithm:ii,parameters:null})}else return new E({algorithm:mr,parameters:null})}return null}toWebAlgorithm(e){switch(e.algorithm){case mr:return{name:"RSASSA-PKCS1-v1_5"};case ri:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case us:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case ni:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case ii:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};io=Ki([di()],io);je.registerSingleton(Zr,io);var en;const ue="1.3.36.3.3.2.8.1.1",sa=`${ue}.1`,aa=`${ue}.2`,la=`${ue}.3`,ca=`${ue}.4`,ua=`${ue}.5`,fa=`${ue}.6`,ha=`${ue}.7`,pa=`${ue}.8`,da=`${ue}.9`,ya=`${ue}.10`,va=`${ue}.11`,ga=`${ue}.12`,ma=`${ue}.13`,ba=`${ue}.14`,wa="brainpoolP160r1",Ba="brainpoolP160t1",ka="brainpoolP192r1",Aa="brainpoolP192t1",xa="brainpoolP224r1",Sa="brainpoolP224t1",Ca="brainpoolP256r1",Ia="brainpoolP256t1",Na="brainpoolP320r1",Oa="brainpoolP320t1",Ea="brainpoolP384r1",Pa="brainpoolP384t1",ja="brainpoolP512r1",Ra="brainpoolP512t1",J="ECDSA";let tn=en=class{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case J.toLowerCase():if("hash"in e)switch((typeof e.hash=="string"?e.hash:e.hash.name).toLowerCase()){case"sha-1":return Rc;case"sha-256":return Tc;case"sha-384":return Hc;case"sha-512":return Uc}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=ta;break;case"K-256":t=en.SECP256K1;break;case"P-384":t=ra;break;case"P-521":t=na;break;case wa:t=sa;break;case Ba:t=aa;break;case ka:t=la;break;case Aa:t=ca;break;case xa:t=ua;break;case Sa:t=fa;break;case Ca:t=ha;break;case Ia:t=pa;break;case Na:t=da;break;case Oa:t=ya;break;case Ea:t=va;break;case Pa:t=ga;break;case ja:t=ma;break;case Ra:t=ba;break}if(t)return new E({algorithm:Zs,parameters:R.serialize(new Pt({namedCurve:t}))})}}return null}toWebAlgorithm(e){switch(e.algorithm){case Ys:return{name:J,hash:{name:"SHA-1"}};case Xs:return{name:J,hash:{name:"SHA-256"}};case Qs:return{name:J,hash:{name:"SHA-384"}};case ea:return{name:J,hash:{name:"SHA-512"}};case Zs:{if(!e.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(R.parse(e.parameters,Pt).namedCurve){case ta:return{name:J,namedCurve:"P-256"};case en.SECP256K1:return{name:J,namedCurve:"K-256"};case ra:return{name:J,namedCurve:"P-384"};case na:return{name:J,namedCurve:"P-521"};case sa:return{name:J,namedCurve:wa};case aa:return{name:J,namedCurve:Ba};case la:return{name:J,namedCurve:ka};case ca:return{name:J,namedCurve:Aa};case ua:return{name:J,namedCurve:xa};case fa:return{name:J,namedCurve:Sa};case ha:return{name:J,namedCurve:Ca};case pa:return{name:J,namedCurve:Ia};case da:return{name:J,namedCurve:Na};case ya:return{name:J,namedCurve:Oa};case va:return{name:J,namedCurve:Ea};case ga:return{name:J,namedCurve:Pa};case ma:return{name:J,namedCurve:ja};case ba:return{name:J,namedCurve:Ra}}}}return null}};tn.SECP256K1="1.3.132.0.10";tn=en=Ki([di()],tn);je.registerSingleton(Zr,tn);class be{addPadding(e,t){const n=H.toUint8Array(t),i=new Uint8Array(e);return i.set(n,e-n.length),i}removePadding(e,t=!1){let n=H.toUint8Array(e);for(let i=0;i<n.length;i++)if(!!n[i]){n=n.slice(i);break}if(t&&n[0]>127){const i=new Uint8Array(n.length+1);return i.set(n,1),i.buffer}return n.buffer}toAsnSignature(e,t){if(e.name==="ECDSA"){const n=e.namedCurve,i=be.namedCurveSize.get(n)||be.defaultNamedCurveSize,o=new Jr,s=H.toUint8Array(t);return o.r=this.removePadding(s.slice(0,i),!0),o.s=this.removePadding(s.slice(i,i+i),!0),R.serialize(o)}return null}toWebSignature(e,t){if(e.name==="ECDSA"){const n=R.parse(t,Jr),i=e.namedCurve,o=be.namedCurveSize.get(i)||be.defaultNamedCurveSize,s=this.addPadding(o,this.removePadding(n.r)),a=this.addPadding(o,this.removePadding(n.s));return Ql(s,a)}return null}}be.namedCurveSize=new Map;be.defaultNamedCurveSize=32;const Ta="1.3.101.110",Ha="1.3.101.111",Ua="1.3.101.112",La="1.3.101.113";let oo=class{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=Ua;break;case"ed448":t=La;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=Ta;break;case"x448":t=Ha;break}}return t?new E({algorithm:t}):null}toWebAlgorithm(e){switch(e.algorithm){case Ua:return{name:"EdDSA",namedCurve:"Ed25519"};case La:return{name:"EdDSA",namedCurve:"Ed448"};case Ta:return{name:"ECDH-ES",namedCurve:"X25519"};case Ha:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};oo=Ki([di()],oo);je.registerSingleton(Zr,oo);Re.register(qo,Vc);Re.register(Yo,Mc);Re.register(Qo,Fc);Re.register(ss,to);Re.register(Hn,Qr);Re.register(is,Te);no.register(Hs,Gc);no.register(Us,Wc);je.registerSingleton(eo,$c);je.registerSingleton(eo,be);be.namedCurveSize.set("P-256",32);be.namedCurveSize.set("K-256",32);be.namedCurveSize.set("P-384",48);be.namedCurveSize.set("P-521",66);var so=r=>({get:e=>r.get(e),set:(e,t)=>(r.set(e,t),t)});const _a=/([^\s\\>"'=]+)\s*=\s*(['"]?)$/,Jc=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,Kc=/<[a-z][^>]+$/i,Zc=/>[^<>]*$/,Yc=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/>)/ig,Xc=/\s+$/,Da=(r,e)=>0<e--&&(Kc.test(r[e])||!Zc.test(r[e])&&Da(r,e)),Qc=(r,e,t)=>Jc.test(e)?r:`<${e}${t.replace(Xc,"")}></${e}>`;var eu=(r,e,t)=>{const n=[],{length:i}=r;for(let s=1;s<i;s++){const a=r[s-1];n.push(_a.test(a)&&Da(r,s)?a.replace(_a,(c,u,w)=>`${e}${s-1}=${w||'"'}${u}${w?"":'"'}`):`${a}<!--${e}${s-1}-->`)}n.push(r[i-1]);const o=n.join("").trim();return t?o:o.replace(Yc,Qc)};const{isArray:ao}=Array,{indexOf:tu,slice:$a}=[],ru=1,Va=111,nu=({firstChild:r,lastChild:e})=>{const t=document.createRange();return t.setStartAfter(r),t.setEndAfter(e),t.deleteContents(),r},iu=(r,e)=>r.nodeType===Va?1/e<0?e?nu(r):r.lastChild:e?r.valueOf():r.firstChild:r,ou=r=>{const{childNodes:e}=r,{length:t}=e;if(t<2)return t?e[0]:r;const n=$a.call(e,0),i=n[0],o=n[t-1];return{ELEMENT_NODE:ru,nodeType:Va,firstChild:i,lastChild:o,valueOf(){if(e.length!==t){let s=0;for(;s<t;)r.appendChild(n[s++])}return r}}};var su=(r,e,t,n,i)=>{const o=t.length;let s=e.length,a=o,c=0,u=0,w=null;for(;c<s||u<a;)if(s===c){const m=a<o?u?n(t[u-1],-0).nextSibling:n(t[a-u],0):i;for(;u<a;)r.insertBefore(n(t[u++],1),m)}else if(a===u)for(;c<s;)(!w||!w.has(e[c]))&&r.removeChild(n(e[c],-1)),c++;else if(e[c]===t[u])c++,u++;else if(e[s-1]===t[a-1])s--,a--;else if(e[c]===t[a-1]&&t[u]===e[s-1]){const m=n(e[--s],-1).nextSibling;r.insertBefore(n(t[u++],1),n(e[c++],-1).nextSibling),r.insertBefore(n(t[--a],1),m),e[s]=t[a]}else{if(!w){w=new Map;let m=u;for(;m<a;)w.set(t[m],m++)}if(w.has(e[c])){const m=w.get(e[c]);if(u<m&&m<a){let j=c,S=1;for(;++j<s&&j<a&&w.get(e[j])===m+S;)S++;if(S>m-u){const f=n(e[c],0);for(;u<m;)r.insertBefore(n(t[u++],1),f)}else r.replaceChild(n(t[u++],1),n(e[c++],-1))}else c++}else r.removeChild(n(e[c++],-1))}return t};const au=r=>e=>{for(const t in e){const n=t==="role"?t:`aria-${t}`,i=e[t];i==null?r.removeAttribute(n):r.setAttribute(n,i)}},lu=(r,e)=>{let t,n=!0;const i=document.createAttributeNS(null,e);return o=>{t!==o&&(t=o,t==null?n||(r.removeAttributeNode(i),n=!0):(i.value=o,n&&(r.setAttributeNodeNS(i),n=!1)))}},cu=(r,e,t)=>n=>{t!==!!n&&((t=!!n)?r.setAttribute(e,""):r.removeAttribute(e))},uu=({dataset:r})=>e=>{for(const t in e){const n=e[t];n==null?delete r[t]:r[t]=n}},Ma=(r,e)=>{let t,n=e.slice(2);return!(e in r)&&e.toLowerCase()in r&&(n=n.toLowerCase()),i=>{const o=ao(i)?i:[i,!1];t!==o[0]&&(t&&r.removeEventListener(n,t,o[1]),(t=o[0])&&r.addEventListener(n,t,o[1]))}},fu=r=>{let e;return t=>{e!==t&&(e=t,typeof t=="function"?t(r):t.current=r)}},hu=(r,e)=>e==="dataset"?uu(r):t=>{r[e]=t},pu=r=>{let e;return t=>{e!=t&&(e=t,r.textContent=t==null?"":t)}},du=({childNodes:r},e)=>r[e],er=(r,e,t)=>su(r.parentNode,e,t,iu,r),yu=r=>{let e,t,n=[];const i=o=>{switch(typeof o){case"string":case"number":case"boolean":e!==o&&(e=o,t||(t=document.createTextNode("")),t.data=o,n=er(r,n,[t]));break;case"object":case"undefined":if(o==null){e!=o&&(e=o,n=er(r,n,[]));break}if(ao(o)){e=o,o.length===0?n=er(r,n,[]):typeof o[0]=="object"?n=er(r,n,o):i(String(o));break}e!==o&&"ELEMENT_NODE"in o&&(e=o,n=er(r,n,o.nodeType===11?$a.call(o.childNodes):[o]));break;case"function":i(o(r));break}};return i},vu=(r,e)=>{switch(e[0]){case"?":return cu(r,e.slice(1),!1);case".":return hu(r,e.slice(1));case"@":return Ma(r,"on"+e.slice(1));case"o":if(e[1]==="n")return Ma(r,e)}switch(e){case"ref":return fu(r);case"aria":return au(r)}return lu(r,e)};function gu(r){const{type:e,path:t}=r,n=t.reduceRight(du,this);return e==="node"?yu(n):e==="attr"?vu(n,r.name):pu(n)}/*! (c) Andrea Giammarchi - ISC */var Fa=function(r){var e="fragment",t="template",n="content"in s(t),i=n?function(c){var u=s(t);return u.innerHTML=c,u.content}:function(c){var u=s(e),w=s(t),m=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(c)){var j=RegExp.$1;w.innerHTML="<table>"+c+"</table>",m=w.querySelectorAll(j)}else w.innerHTML=c,m=w.childNodes;return o(u,m),u};return function(u,w){return(w==="svg"?a:i)(u)};function o(c,u){for(var w=u.length;w--;)c.appendChild(u[0])}function s(c){return c===e?r.createDocumentFragment():r.createElementNS("http://www.w3.org/1999/xhtml",c)}function a(c){var u=s(e),w=s("div");return w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+c+"</svg>",o(u,w.firstChild.childNodes),u}}(document);const za=document.importNode.length!=1,mu=za?(r,e,t)=>document.importNode(Fa(r,e,t),!0):Fa,bu=za?r=>document.createTreeWalker(r,1|128,null,!1):r=>document.createTreeWalker(r,1|128),lo=r=>{const e=[];let{parentNode:t}=r;for(;t;)e.push(tu.call(t.childNodes,r)),r=t,t=r.parentNode;return e},tr="is\xB5",qa=so(new WeakMap),wu=/^(?:plaintext|script|style|textarea|title|xmp)$/i,rr=()=>({stack:[],entry:null,wire:null}),Bu=(r,e)=>{const{content:t,updates:n}=Au(r,e);return{type:r,template:e,content:t,updates:n,wire:null}},ku=(r,e)=>{const t=eu(e,tr,r==="svg"),n=mu(t,r),i=bu(n),o=[],s=e.length-1;let a=0,c=`${tr}${a}`;for(;a<s;){const u=i.nextNode();if(!u)throw`bad template: ${t}`;if(u.nodeType===8)u.data===c&&(o.push({type:"node",path:lo(u)}),c=`${tr}${++a}`);else{for(;u.hasAttribute(c);)o.push({type:"attr",path:lo(u),name:u.getAttribute(c)}),u.removeAttribute(c),c=`${tr}${++a}`;wu.test(u.tagName)&&u.textContent.trim()===`<!--${c}-->`&&(u.textContent="",o.push({type:"text",path:lo(u)}),c=`${tr}${++a}`)}}return{content:n,nodes:o}},Au=(r,e)=>{const{content:t,nodes:n}=qa.get(e)||qa.set(e,ku(r,e)),i=document.importNode(t,!0),o=n.map(gu,i);return{content:i,updates:o}},rn=(r,{type:e,template:t,values:n})=>{const{length:i}=n;Ga(r,n,i);let{entry:o}=r;(!o||o.template!==t||o.type!==e)&&(r.entry=o=Bu(e,t));const{content:s,updates:a,wire:c}=o;for(let u=0;u<i;u++)a[u](n[u]);return c||(o.wire=ou(s))},Ga=({stack:r},e,t)=>{for(let n=0;n<t;n++){const i=e[n];i instanceof co?e[n]=rn(r[n]||(r[n]=rr()),i):ao(i)?Ga(r[n]||(r[n]=rr()),i,i.length):r[n]=null}t<r.length&&r.splice(t)};function co(r,e,t){this.type=r,this.template=e,this.values=t}const{create:xu,defineProperties:Su}=Object,Wa=r=>{const e=so(new WeakMap),t=n=>(i,...o)=>rn(n,{type:r,template:i,values:o});return Su((n,...i)=>new co(r,n,i),{for:{value(n,i){const o=e.get(n)||e.set(n,xu(null));return o[i]||(o[i]=t(rr()))}},node:{value:(n,...i)=>rn(rr(),{type:r,template:n,values:i}).valueOf()}})},Ja=so(new WeakMap),Xf=(r,e)=>{const t=typeof e=="function"?e():e,n=Ja.get(r)||Ja.set(r,rr()),i=t instanceof co?rn(n,t):t;return i!==n.wire&&(n.wire=i,r.textContent="",r.appendChild(i.valueOf())),r},Qf=Wa("html");Wa("svg");export{Xr as X,an as c,Qf as h,Xf as r};
